import{S as m}from"./DOYwHpwi.js";import{_ as A,r as p,g as E,m as n,o as U,n as w,w as v,b as l,d as C,z as P}from"./0Y_4GbZS.js";const B={__name:"ProductUpdate",props:{product:Object},emits:["save"],setup(f,{emit:_}){const b=P(),s=p(""),r=p(""),u=f,d=_,a=p({...u.product});E(()=>u.product,t=>{a.value={...t}});const V=async()=>{try{const t=new FormData;t.append("name",a.value.name),t.append("status",a.value.status),t.append("description",a.value.description),t.append("price",a.value.price),s.value&&t.append("anverso",s.value),r.value&&t.append("reverso",r.value),(await fetch(`${b.public.API_BASE_URL}products/${u.product.id}`,{method:"PATCH",body:t,headers:{Accept:"application/json"}})).ok&&(m.fire({title:"Se actualizó",text:"Actualizada correctamente",icon:"success",confirmButtonText:"Aceptar"}),d("save",!0,a.value.id,a.value.name))}catch{m.fire({title:"Error interno",text:"No se pudo actualizar",icon:"error",confirmButtonText:"Aceptar"}),d("save",!1,null)}};return(t,o)=>{const i=n("v-text-field"),x=n("v-textarea"),c=n("v-file-input"),g=n("v-btn"),N=n("v-form");return U(),w(N,null,{default:v(()=>[l(i,{class:"input",modelValue:a.value.name,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value.name=e),label:"Nombre",rules:[e=>!!e||"El nombre es requerido"]},null,8,["modelValue","rules"]),l(i,{class:"input",modelValue:a.value.status,"onUpdate:modelValue":o[1]||(o[1]=e=>a.value.status=e),label:"Estado",rules:[e=>!!e||"Este campo es obligatorio",e=>!isNaN(e)||"El estado debe ser un número válido"]},null,8,["modelValue","rules"]),l(x,{class:"input",modelValue:a.value.description,"onUpdate:modelValue":o[2]||(o[2]=e=>a.value.description=e),label:"Descripción",rows:"3",rules:[e=>e.length>5||"La descripción debe contener al menos 5 caracteres"]},null,8,["modelValue","rules"]),l(i,{class:"input",modelValue:a.value.price,"onUpdate:modelValue":o[3]||(o[3]=e=>a.value.price=e),label:"Precio",rules:[e=>!!e||"Este campo es obligatorio",e=>!isNaN(e)||"El precio debe ser un número válido"]},null,8,["modelValue","rules"]),l(c,{class:"file-input",modelValue:s.value,"onUpdate:modelValue":o[4]||(o[4]=e=>s.value=e),label:"Anverso",accept:"image/*","prepend-icon":"mdi-image"},null,8,["modelValue"]),l(c,{class:"file-input",modelValue:r.value,"onUpdate:modelValue":o[5]||(o[5]=e=>r.value=e),label:"Reverso",accept:"image/*","prepend-icon":"mdi-image"},null,8,["modelValue"]),l(g,{class:"save-button",onClick:V},{default:v(()=>o[6]||(o[6]=[C("Guardar")])),_:1})]),_:1})}}},S=A(B,[["__scopeId","data-v-2e9c75bb"]]);export{S as _};
