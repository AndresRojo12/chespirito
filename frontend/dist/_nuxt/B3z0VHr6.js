import{_ as G,r as f,a5 as H,q as h,s as S,c as g,x as b,b as e,E as C,a as i,n as O,w as l,d as j,t as Y,F as J,u as K,p as Q,m as o,o as p,C as d,a6 as X,a7 as Z,z as ee}from"./LVjYQMdl.js";import{u as te}from"./LQ2gV1FS.js";import{S as oe}from"./DOYwHpwi.js";import{L as ne}from"./CkOKT_tB.js";const ae={key:0},se={key:1},re={class:"footer"},ie={class:"footer-bottom"},le={__name:"default",setup(ce){const k=ee(),c=te(),v=f(null),u=K(),y=Q(),{mdAndUp:A}=H(),s=f(!1),n=f(!0),m=h(()=>A.value),x=h(()=>n.value?55:155);S(()=>{c.loadUserFromStorage(),s.value=m.value&&c.isAuthenticated});const B=async()=>{try{const t=localStorage.getItem("token"),_=await(await fetch(`${k.public.API_BASE_URL}auth/me`,{headers:{Authorization:`Bearer ${t}`}})).json();v.value=_}catch(t){console.log(t)}};S(async()=>{await B()});const I=()=>{n.value=!1},V=()=>{n.value=!0},D=h(()=>["/user/gestion","/product/list","/sales/list","/inventory/list"].includes(y.path)),E=()=>{s.value=!s.value,n.value=!s.value},L=()=>{u.push("/user/gestion")},M=()=>{u.push("/product/list")},N=()=>{u.push("/sales/list")},P=()=>{u.push("/inventory/list")},R=()=>{oe.fire({title:"¿Seguro quieres cerrar sesión?",icon:"question",showCancelButton:!0,confirmButtonText:"Si,cerrar sesión",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&U()})},U=()=>{c.logout(),u.push("/")};return(t,a)=>{const _=o("v-app-bar-nav-icon"),r=o("v-list-item"),w=o("v-list"),F=o("v-divider"),T=o("v-navigation-drawer"),$=o("v-container"),q=o("v-main"),z=o("v-app");return p(),g(J,null,[b(c).loading?(p(),g("div",ae,[e(ne)])):C("",!0),b(c).isAuthenticated?(p(),g("div",se,[i("div",null,[D.value?(p(),O(_,{key:0,class:"icon-navbar",onClick:E,app:""})):C("",!0),a[2]||(a[2]=i("h1",{class:"title"},"ANTIGÜEDADES CHESPIRITO",-1)),e(z,null,{default:l(()=>[e(T,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=W=>s.value=W),app:"",fixed:"",width:x.value,rail:n.value,"expand-on-hover":m.value,temporary:!m.value,onMouseenter:I,onMouseleave:V},{default:l(()=>[e(w,null,{default:l(()=>[e(r,{class:"buttons",title:`${v.value?v.value.role:"Usuario"}`,"prepend-icon":"mdi-account-circle"},null,8,["title"])]),_:1}),e(F),e(w,{density:"compact",nav:""},{default:l(()=>[e(r,{class:"buttons",title:"Inicio","prepend-icon":"mdi-home-city",onClick:d(L,["prevent"])}),e(r,{class:"buttons",title:"Productos","prepend-icon":"mdi-cash",onClick:d(M,["prevent"])}),e(r,{class:"buttons",title:"Ventas","prepend-icon":"mdi-elevation-rise",onClick:d(N,["prevent"])}),e(r,{class:"buttons",title:"Inventarios","prepend-icon":"mdi-clipboard-text",onClick:d(P,["prevent"])}),e(r,{class:"buttons",title:"Salir","prepend-icon":"mdi-logout",onClick:d(R,["prevent"])})]),_:1})]),_:1},8,["modelValue","width","rail","expand-on-hover","temporary"]),e(q,{class:X({"main-expanded":n.value,"main-collapsed":!n.value}),app:""},{default:l(()=>[e($,{fluid:""},{default:l(()=>[Z(t.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["class"])]),_:3}),i("footer",re,[i("div",null,[i("div",ie,[j(Y(new Date().getFullYear())+" — ",1),a[1]||(a[1]=i("strong",null,"Antigüedades Chespirito",-1))])])])])])):C("",!0)],64)}}},me=G(le,[["__scopeId","data-v-6a8f9baf"]]);export{me as default};
