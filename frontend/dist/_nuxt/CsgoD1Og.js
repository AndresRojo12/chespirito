import{_ as K,A as X,E as h,r as g,s as ee,v as te,g as le,m as c,o as u,c as d,a as r,b as n,w as s,d as V,C as ae,x as l,H as Y,n as B,F as $,y as C,t as p,D as F,z as oe}from"./DkewYONJ.js";import{d as ne}from"./CVGRC5-7.js";import{m as ue}from"./BAQvquOn.js";import{u as R}from"./DUKX-aPY.js";const re={class:"header-container"},de={class:"text-left"},se={class:"text-left"},ie={class:"text-left"},me={class:"text-left"},ce={class:"text-left"},pe={key:2,style:{"text-align":"center"}},ve={class:"text-center"},ge={__name:"SalesGrid",setup(z){const k=oe(),E=X(),{mdAndUp:L}=h(),D=L,b=g(1),I=g(10),G=g(10),S=g([]),w=g([]),A=g([]),v=g([]),a=g({categoryId:"",categoryName:"",productId:"",productName:"",quantitySold:"",salePrice:"",created_at:""}),f=g(!1),N=async()=>{f.value=!1;try{const{data:o,error:e}=await R(`${k.public.API_BASE_URL}sales?page=${b.value}
      &pageSize=${I.value}&categoryId=${a.value.categoryId}&categoryName=${a.value.categoryName}&productId=${a.value.productId}&productName=${a.value.productName}&quantitySold=${a.value.quantitySold}&salePrice=${a.value.salePrice}&createdAt=${a.value.created_at}`,{method:"GET"},"$CP5fcewpS2");if(e.value||!o.value){f.value=!0,S.value=[],v.value=[];return}S.value=o.value.data,G.value=o.value.totalPages,q()}catch(o){console.log(o),f.value=!0}},j=async()=>{try{const{data:o}=await R(`${k.public.API_BASE_URL}categories`,{method:"GET"},"$8jYQUjC1FG");w.value=o.value.data,q()}catch(o){console.log(o)}},H=async()=>{try{const{data:o}=await R(`${k.public.API_BASE_URL}products`,{method:"GET"},"$nlNlZs5NtW");A.value=o.value.data,q()}catch(o){console.log(o)}},q=()=>{S.value.length>0&&w.value.length>0&&A.value.length>0&&(v.value=S.value.map(o=>{const e=w.value.find(P=>P.id===o.categoryId),U=A.value.find(P=>P.id===o.productId);return{...o,categoryName:e?e.name:o.products.category.name,productName:U?U.name:o.products.name}}))};ee(async()=>{await te(),await N(),await j(),await H()});const y=ne(o=>{b.value=o,N()},500),x=o=>{const e=a.value[o];isNaN(e)?(f.value=!0,v.value=[]):(f.value=!1,y(1))};le([b,I,a],()=>{N()});const i=o=>{a.value[o]="",f.value=!1,y(1),N()},O=()=>{E.push("/sales/register")};return(o,e)=>{const U=c("v-btn"),P=c("v-select"),m=c("v-text-field"),_=c("v-col"),T=c("v-table"),Q=c("v-alert"),W=c("v-pagination"),M=c("v-container"),Z=c("P"),J=c("v-row");return u(),d($,null,[r("div",re,[n(U,{class:"register-button",onClick:ae(O,["prevent"])},{default:s(()=>e[32]||(e[32]=[V("Registrar ventas")])),_:1}),n(P,{class:"page-select",label:"Seleccionar número de items por página",modelValue:l(I),"onUpdate:modelValue":e[0]||(e[0]=t=>Y(I)?I.value=t:null),items:[10,20,30,40,50,100],onChange:N},null,8,["modelValue"])]),l(D)?F("",!0):(u(),B(T,{key:0},{default:s(()=>[r("thead",null,[n(m,{modelValue:l(a).categoryName,"onUpdate:modelValue":e[1]||(e[1]=t=>l(a).categoryName=t),label:"Categoría",clearable:"",onInput:e[2]||(e[2]=t=>l(y)(1)),"onClick:clear":e[3]||(e[3]=t=>i("categoryName"))},null,8,["modelValue"]),(u(!0),d($,null,C(l(v),t=>(u(),d("tr",{key:t.id},[n(_,null,{default:s(()=>[V(p(t.categoryName),1)]),_:2},1024)]))),128)),n(m,{modelValue:l(a).productName,"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).productName=t),label:"Producto",clearable:"",onInput:e[5]||(e[5]=t=>l(y)(1)),"onClick:clear":e[6]||(e[6]=t=>i("productName"))},null,8,["modelValue"]),(u(!0),d($,null,C(l(v),t=>(u(),d("tr",{key:t.id},[n(_,null,{default:s(()=>[V(p(t.productName),1)]),_:2},1024)]))),128)),n(m,{modelValue:l(a).quantitySold,"onUpdate:modelValue":e[7]||(e[7]=t=>l(a).quantitySold=t),label:"Cantidad",clearable:"",onInput:e[8]||(e[8]=t=>x("quantitySold")),"onClick:clear":e[9]||(e[9]=t=>i("quantitySold"))},null,8,["modelValue"]),(u(!0),d($,null,C(l(v),t=>(u(),d("tr",{key:t.id},[n(_,null,{default:s(()=>[V(p(t.quantitySold),1)]),_:2},1024)]))),128)),n(m,{modelValue:l(a).salePrice,"onUpdate:modelValue":e[10]||(e[10]=t=>l(a).salePrice=t),label:"Total",clearable:"",onInput:e[11]||(e[11]=t=>x("salePrice")),"onClick:clear":e[12]||(e[12]=t=>i("salePrice"))},null,8,["modelValue"]),(u(!0),d($,null,C(l(v),t=>(u(),d("tr",{key:t.id},[n(_,null,{default:s(()=>[V(p(t.salePrice),1)]),_:2},1024)]))),128)),n(m,{modelValue:l(a).created_at,"onUpdate:modelValue":e[13]||(e[13]=t=>l(a).created_at=t),label:"Fecha",clearable:"",onInput:e[14]||(e[14]=t=>l(y)(1)),"onClick:clear":e[15]||(e[15]=t=>i("created_at"))},null,8,["modelValue"]),(u(!0),d($,null,C(l(v),t=>(u(),d("tr",{key:t.id},[n(_,null,{default:s(()=>[V(p(t.createdAt),1)]),_:2},1024)]))),128))])]),_:1})),l(D)?(u(),B(T,{key:1},{default:s(()=>[r("thead",null,[r("tr",null,[r("th",de,[n(m,{modelValue:l(a).categoryName,"onUpdate:modelValue":e[16]||(e[16]=t=>l(a).categoryName=t),label:"Categoría",clearable:"",onInput:e[17]||(e[17]=t=>l(y)(1)),"onClick:clear":e[18]||(e[18]=t=>i("categoryName"))},null,8,["modelValue"])]),r("th",se,[n(m,{modelValue:l(a).productName,"onUpdate:modelValue":e[19]||(e[19]=t=>l(a).productName=t),label:"Producto",clearable:"",onInput:e[20]||(e[20]=t=>l(y)(1)),"onClick:clear":e[21]||(e[21]=t=>i("productName"))},null,8,["modelValue"])]),r("th",ie,[n(m,{modelValue:l(a).quantitySold,"onUpdate:modelValue":e[22]||(e[22]=t=>l(a).quantitySold=t),label:"Cantidad",clearable:"",onInput:e[23]||(e[23]=t=>x("quantitySold")),"onClick:clear":e[24]||(e[24]=t=>i("quantitySold"))},null,8,["modelValue"])]),r("th",me,[n(m,{modelValue:l(a).salePrice,"onUpdate:modelValue":e[25]||(e[25]=t=>l(a).salePrice=t),label:"Total",clearable:"",onInput:e[26]||(e[26]=t=>x("salePrice")),"onClick:clear":e[27]||(e[27]=t=>i("salePrice"))},null,8,["modelValue"])]),r("th",ce,[n(m,{modelValue:l(a).created_at,"onUpdate:modelValue":e[28]||(e[28]=t=>l(a).created_at=t),label:"Fecha",clearable:"",onInput:e[29]||(e[29]=t=>l(y)(1)),"onClick:clear":e[30]||(e[30]=t=>i("created_at"))},null,8,["modelValue"])])])]),r("tbody",null,[(u(!0),d($,null,C(l(v),t=>(u(),d("tr",{key:t.id},[r("td",null,p(t.categoryName),1),r("td",null,p(t.productName),1),r("td",null,p(t.quantitySold),1),r("td",null,p(t.salePrice),1),r("td",null,p(l(ue)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1)]))),128))])]),_:1})):F("",!0),l(f)?(u(),d("div",pe,[n(Q,{color:"#009c8c",type:"warning"},{default:s(()=>e[33]||(e[33]=[V(" No se encontraron registros. ")])),_:1})])):F("",!0),r("div",ve,[n(M,null,{default:s(()=>[n(J,{justify:"center"},{default:s(()=>[n(_,{cols:"8"},{default:s(()=>[n(M,{class:"max-width"},{default:s(()=>[n(W,{modelValue:l(b),"onUpdate:modelValue":e[31]||(e[31]=t=>Y(b)?b.value=t:null),length:l(G),onInput:N,class:"my-4"},null,8,["modelValue","length"])]),_:1}),n(Z)]),_:1})]),_:1})]),_:1})])],64)}}},ye=K(ge,[["__scopeId","data-v-ba395ce1"]]),Ne={__name:"list",setup(z){return(k,E)=>(u(),B(ye))}};export{Ne as default};
