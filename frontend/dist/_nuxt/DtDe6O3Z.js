import{_ as C,u as h,r as l,m as c,o as v,c as V,a as t,b as n,w as u,C as m,d as I,z as B,n as E}from"./DzSD3iaJ.js";import{u as N}from"./DrJiXVD6.js";import{S as f}from"./DOYwHpwi.js";const S={class:"card"},U={class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},O={__name:"LoginUser",setup(_){const d=B(),s=h(),x=N(),a=l(""),r=l(""),g=l(!1),w=async()=>{try{const o=await fetch(`${d.public.API_BASE_URL}auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.value,password:r.value})}),e=await o.json();o.ok?(x.login(e.token),s.push("/user/gestion")):f.fire({icon:"error",title:"Error",text:e.message})}catch(o){console.error("Error logging in",o),f.fire({icon:"error",title:"Error",text:"Hubo un problema al iniciar sesión. Inténtalo de nuevo."})}},b=()=>{s.push("/user/change-password")};return(o,e)=>{const p=c("v-text-field"),k=c("v-btn"),y=c("v-card");return v(),V("div",S,[e[6]||(e[6]=t("h1",{class:"title"},"Iniciar sesión",-1)),n(y,{class:"mx-auto pa-12 pb-8",elevation:"8","max-width":"350",rounded:"lg"},{default:u(()=>[e[5]||(e[5]=t("div",{class:"text-subtitle-1 text-medium-emphasis color-#009c8c"},[t("p",{class:"form-text"},"Correo electrónico")],-1)),n(p,{class:"input",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=i=>a.value=i),density:"compact",placeholder:"Dirección de correo","prepend-inner-icon":"mdi-email-outline",variant:"outlined",autocomplete:"email",name:"email",id:"email"},null,8,["modelValue"]),t("div",U,[e[3]||(e[3]=t("p",{class:"form-text"},"Contraseña",-1)),t("a",{class:"password-text text-caption text-decoration-none",href:"#",rel:"noopener noreferrer",target:"blank",onClick:m(b,["prevent"])},e[2]||(e[2]=[t("p",{class:"password-text"},"¿Olvidó su contraseña?",-1)]))]),n(p,{class:"input",type:"password",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=i=>r.value=i),"append-inner-icon":g.value?"mdi-eye-off":"mdi-eye",density:"compact",placeholder:"Ingrese su contraseña","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":o.togglePasswordVisibility,autocomplete:"current-password",name:"password",id:"password"},null,8,["modelValue","append-inner-icon","onClick:appendInner"]),n(k,{class:"button mb-8",size:"large",variant:"tonal",block:"",onClick:m(w,["prevent"])},{default:u(()=>e[4]||(e[4]=[I(" Iniciar ")])),_:1})]),_:1})])}}},P=C(O,[["__scopeId","data-v-2afe7048"]]),R={__name:"index",setup(_){return(d,s)=>(v(),E(P))}};export{R as default};
