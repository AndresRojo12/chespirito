import{_ as X,A as h,r as p,E as ee,s as te,v as le,g as ae,m as v,o as r,c as s,a as u,b as o,w as d,d as f,C as oe,x as l,H as M,n as P,D as I,F as V,y as _,t as g,z as ne}from"./PexJTClo.js";import{m as re}from"./Dqxmxt4-.js";import{L as Y}from"./CIAY-Gyt.js";import{u as E}from"./Djd6y8D_.js";import"./C4iS2aBk.js";const ue={class:"header-container"},de={class:"text-left"},se={class:"text-left"},ie={class:"text-left"},me={class:"text-left"},ce={class:"text-left"},pe={key:2,style:{"text-align":"center"}},ve={class:"text-center"},ge={__name:"SalesGrid",setup(z){const S=ne(),D=h(),x=p(!1),{mdAndUp:j}=ee(),G=j,$=p(1),k=p(10),L=p(10),U=p([]),F=p([]),R=p([]),y=p([]),a=p({categoryId:"",categoryName:"",productId:"",productName:"",quantitySold:"",salePrice:"",created_at:""}),w=p(!1),b=async()=>{x.value=!0,w.value=!1;try{const{data:n,error:e}=await E(`${S.public.API_BASE_URL}sales?page=${$.value}
      &pageSize=${k.value}&categoryId=${a.value.categoryId}&categoryName=${a.value.categoryName}&productId=${a.value.productId}&productName=${a.value.productName}&quantitySold=${a.value.quantitySold}&salePrice=${a.value.salePrice}&createdAt=${a.value.created_at}`,{method:"GET"},"$CP5fcewpS2");if(e.value||!n.value){w.value=!0,U.value=[],y.value=[];return}U.value=n.value.data,L.value=n.value.totalPages,B()}catch(n){console.log(n),w.value=!0}finally{x.value=!1}},H=async()=>{try{const{data:n}=await E(`${S.public.API_BASE_URL}categories`,{method:"GET"},"$8jYQUjC1FG");F.value=n.value.data,B()}catch(n){console.log(n)}},O=async()=>{try{const{data:n}=await E(`${S.public.API_BASE_URL}products`,{method:"GET"},"$nlNlZs5NtW");R.value=n.value.data,B()}catch(n){console.log(n)}},B=()=>{U.value.length>0&&F.value.length>0&&R.value.length>0&&(y.value=U.value.map(n=>{const e=F.value.find(C=>C.id===n.categoryId),A=R.value.find(C=>C.id===n.productId);return{...n,categoryName:e?e.name:n.products.category.name,productName:A?A.name:n.products.name}}))};te(async()=>{await le(),await b(),await H(),await O()});const i=n=>{$.value=n,b()};ae([$,k,a],()=>{b()});const m=n=>{a.value[n]="",i(1),b()},Q=()=>{D.push("/sales/register")};return(n,e)=>{const A=v("v-btn"),C=v("v-select"),q=v("v-container"),c=v("v-text-field"),N=v("v-col"),T=v("v-table"),W=v("v-alert"),Z=v("v-pagination"),J=v("P"),K=v("v-row");return r(),s(V,null,[u("div",ue,[o(A,{class:"register-button",onClick:oe(Q,["prevent"])},{default:d(()=>e[32]||(e[32]=[f("Registrar ventas")])),_:1}),o(C,{class:"page-select",label:"Seleccionar número de items por página",modelValue:l(k),"onUpdate:modelValue":e[0]||(e[0]=t=>M(k)?k.value=t:null),items:[10,20,30,40,50,100],onChange:b},null,8,["modelValue"])]),l(G)?I("",!0):(r(),P(T,{key:0},{default:d(()=>[l(x)?(r(),P(q,{key:0},{default:d(()=>[o(Y)]),_:1})):I("",!0),u("thead",null,[o(c,{modelValue:l(a).categoryName,"onUpdate:modelValue":e[1]||(e[1]=t=>l(a).categoryName=t),label:"Categoría",clearable:"",onInput:e[2]||(e[2]=t=>i(1)),"onClick:clear":e[3]||(e[3]=t=>m("categoryName"))},null,8,["modelValue"]),(r(!0),s(V,null,_(l(y),t=>(r(),s("tr",{key:t.id},[o(N,null,{default:d(()=>[f(g(t.categoryName),1)]),_:2},1024)]))),128)),o(c,{modelValue:l(a).productName,"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).productName=t),label:"Producto",clearable:"",onInput:e[5]||(e[5]=t=>i(1)),"onClick:clear":e[6]||(e[6]=t=>m("productName"))},null,8,["modelValue"]),(r(!0),s(V,null,_(l(y),t=>(r(),s("tr",{key:t.id},[o(N,null,{default:d(()=>[f(g(t.productName),1)]),_:2},1024)]))),128)),o(c,{modelValue:l(a).quantitySold,"onUpdate:modelValue":e[7]||(e[7]=t=>l(a).quantitySold=t),label:"Cantidad",clearable:"",onInput:e[8]||(e[8]=t=>i(1)),"onClick:clear":e[9]||(e[9]=t=>m("quantitySold"))},null,8,["modelValue"]),(r(!0),s(V,null,_(l(y),t=>(r(),s("tr",{key:t.id},[o(N,null,{default:d(()=>[f(g(t.quantitySold),1)]),_:2},1024)]))),128)),o(c,{modelValue:l(a).salePrice,"onUpdate:modelValue":e[10]||(e[10]=t=>l(a).salePrice=t),label:"Total",clearable:"",onInput:e[11]||(e[11]=t=>i(1)),"onClick:clear":e[12]||(e[12]=t=>m("salePrice"))},null,8,["modelValue"]),(r(!0),s(V,null,_(l(y),t=>(r(),s("tr",{key:t.id},[o(N,null,{default:d(()=>[f(g(t.salePrice),1)]),_:2},1024)]))),128)),o(c,{modelValue:l(a).created_at,"onUpdate:modelValue":e[13]||(e[13]=t=>l(a).created_at=t),label:"Fecha",clearable:"",onInput:e[14]||(e[14]=t=>i(1)),"onClick:clear":e[15]||(e[15]=t=>m("created_at"))},null,8,["modelValue"]),(r(!0),s(V,null,_(l(y),t=>(r(),s("tr",{key:t.id},[o(N,null,{default:d(()=>[f(g(t.createdAt),1)]),_:2},1024)]))),128))])]),_:1})),l(G)?(r(),P(T,{key:1},{default:d(()=>[u("thead",null,[u("tr",null,[u("th",de,[o(c,{modelValue:l(a).categoryName,"onUpdate:modelValue":e[16]||(e[16]=t=>l(a).categoryName=t),label:"Categoría",clearable:"",onInput:e[17]||(e[17]=t=>i(1)),"onClick:clear":e[18]||(e[18]=t=>m("categoryName"))},null,8,["modelValue"])]),u("th",se,[o(c,{modelValue:l(a).productName,"onUpdate:modelValue":e[19]||(e[19]=t=>l(a).productName=t),label:"Producto",clearable:"",onInput:e[20]||(e[20]=t=>i(1)),"onClick:clear":e[21]||(e[21]=t=>m("productName"))},null,8,["modelValue"])]),u("th",ie,[o(c,{modelValue:l(a).quantitySold,"onUpdate:modelValue":e[22]||(e[22]=t=>l(a).quantitySold=t),label:"Cantidad",clearable:"",onInput:e[23]||(e[23]=t=>i(1)),"onClick:clear":e[24]||(e[24]=t=>m("quantitySold"))},null,8,["modelValue"])]),u("th",me,[o(c,{modelValue:l(a).salePrice,"onUpdate:modelValue":e[25]||(e[25]=t=>l(a).salePrice=t),label:"Total",clearable:"",onInput:e[26]||(e[26]=t=>i(1)),"onClick:clear":e[27]||(e[27]=t=>m("salePrice"))},null,8,["modelValue"])]),u("th",ce,[o(c,{modelValue:l(a).created_at,"onUpdate:modelValue":e[28]||(e[28]=t=>l(a).created_at=t),label:"Fecha",clearable:"",onInput:e[29]||(e[29]=t=>i(1)),"onClick:clear":e[30]||(e[30]=t=>m("created_at"))},null,8,["modelValue"])])])]),u("tbody",null,[l(x)?(r(),P(q,{key:0},{default:d(()=>[o(Y)]),_:1})):I("",!0),(r(!0),s(V,null,_(l(y),t=>(r(),s("tr",{key:t.id},[u("td",null,g(t.categoryName),1),u("td",null,g(t.productName),1),u("td",null,g(t.quantitySold),1),u("td",null,g(t.salePrice),1),u("td",null,g(l(re)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1)]))),128))])]),_:1})):I("",!0),l(w)?(r(),s("div",pe,[o(W,{color:"#009c8c",type:"warning"},{default:d(()=>e[33]||(e[33]=[f(" No se encontraron registros. ")])),_:1})])):I("",!0),u("div",ve,[o(q,null,{default:d(()=>[o(K,{justify:"center"},{default:d(()=>[o(N,{cols:"8"},{default:d(()=>[o(q,{class:"max-width"},{default:d(()=>[o(Z,{modelValue:l($),"onUpdate:modelValue":e[31]||(e[31]=t=>M($)?$.value=t:null),length:l(L),onInput:b,class:"my-4"},null,8,["modelValue","length"])]),_:1}),o(J)]),_:1})]),_:1})]),_:1})])],64)}}},ye=X(ge,[["__scopeId","data-v-5989b77e"]]),_e={__name:"list",setup(z){return(S,D)=>(r(),P(ye))}};export{_e as default};
