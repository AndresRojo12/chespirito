import{L as le}from"./Cz6vfwWj.js";import{_ as ne,A as se,r,s as re,v as ce,g as b,m as n,o as v,c as f,a as u,b as t,w as o,d,C as ue,F as B,y as ie,t as P,G as R,n as A,D as de,z as ve}from"./DkewYONJ.js";import{d as _e}from"./CVGRC5-7.js";import{_ as me}from"./D_ZNelTs.js";import{_ as pe}from"./1isuMVoB.js";import{u as fe}from"./DUKX-aPY.js";import"./DOYwHpwi.js";const ge={class:"header-container"},ye={key:0,style:{"text-align":"center"}},xe={key:1,class:"product-container"},we=["src"],Pe={class:"product-info"},Ve={class:"info"},Ce={class:"info"},ke={class:"info"},be={class:"info"},he={class:"text-center"},$e={__name:"ProductList",setup(M){const V=ve(),h=se(),g=r(!1),y=r(1),x=r(10),_=r(!1),$=r(null),m=r(!1),E=r(null),D=r([]),s=r({data:[],totalPages:1}),w=r(""),p=r(!1),i=async()=>{g.value=!0;try{const{data:a}=await fe(`${V.public.API_BASE_URL}products?page=${y.value}&pageSize=${x.value}`,{method:"GET"},"$7nKpWV8wlZ");D.value=a.value.data,s.value={data:a.value.data,totalPages:a.value.totalPages}}catch{s.value={data:[],totalPages:1}}finally{g.value=!1}};re(async()=>{await ce(),await i()});const T=a=>a,j=_e(async a=>{if(await i(),!a.trim()){s.value={data:D.value,totalPages:s.value.totalPages},p.value=categories.value.length===0;return}try{const c=await(await fetch(`${V.public.API_BASE_URL}products/search?query=${encodeURIComponent(a.trim())}`)).json();s.value={data:c,totalPages:1},p.value=c.length===0}catch(e){console.error("Error fetching filtered products:",e),s.value={data:[],totalPages:1},p.value=!0}},500);b(w,a=>{j(a)}),b(y,async()=>{await i()}),b(x,async()=>{await i()});const z=a=>{a&&a.id?($.value={...a},_.value=!0):console.error("El objeto product no tiene una propiedad id válida.")},G=async a=>{if(a){const e=s.value.data.findIndex(c=>c.id===a.id);e!==-1&&(s.value.data[e]=a)}await i(),_.value=!1},X=async a=>{const e=s.value.data.findIndex(c=>c.id===a);e!==-1&&s.value.data.splice(e,1),await i(),m.value=!1},q=a=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0}).format(a),K=a=>{m.value=!0,E.value=a},O=()=>{h.push("/product/register")},W=()=>{w.value="",p.value=!1};return(a,e)=>{const c=n("v-btn"),Z=n("v-text-field"),H=n("v-select"),J=n("v-alert"),I=n("v-icon"),S=n("v-tooltip"),Q=n("v-pagination"),C=n("v-container"),Y=n("v-col"),ee=n("v-row"),te=n("v-card-title"),L=n("v-card-text"),U=n("v-card-actions"),F=n("v-card"),N=n("v-dialog"),ae=le;return v(),f(B,null,[u("div",ge,[t(c,{class:"register-button",onClick:ue(O,["prevent"])},{default:o(()=>e[7]||(e[7]=[d(" Registrar producto ")])),_:1}),t(Z,{class:"search-field",modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=l=>w.value=l),density:"comfortable",placeholder:"Buscar Productos","prepend-inner-icon":"mdi-magnify",variant:"solo",clearable:"","hide-details":"","onClick:clear":W},null,8,["modelValue"])]),t(H,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=l=>x.value=l),class:"page-select",items:[10,20,30,40,50],label:"Seleccionar productos por página",onChange:i},null,8,["modelValue"]),!g.value&&p.value?(v(),f("div",ye,[t(J,{color:"#009c8c",type:"warning"},{default:o(()=>e[8]||(e[8]=[d(" No se encontraron registros. ")])),_:1})])):(v(),f("div",xe,[(v(!0),f(B,null,ie(s.value.data||[],l=>(v(),f("div",{class:"product-item",key:l.id},[u("div",null,[u("img",{class:"product-image",src:T(l.imagePath1)},null,8,we)]),u("div",Pe,[u("h1",Ve,P(l.name),1),u("p",Ce,"Estado "+P(l.status),1),u("p",ke,P(l.description),1),u("p",be,P(q(l.price)),1)]),t(S,{text:"Editar"},{activator:o(({props:k})=>[t(I,R({style:{color:"rgba(228, 192, 11, 0.663)"},ref_for:!0},k,{onClick:oe=>z(l)}),{default:o(()=>e[9]||(e[9]=[d(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024),t(S,{text:"Eliminar"},{activator:o(({props:k})=>[t(I,R({style:{color:"darkslategrey"},ref_for:!0},k,{onClick:oe=>K(l)}),{default:o(()=>e[10]||(e[10]=[d(" mdi-delete ")])),_:2},1040,["onClick"])]),_:2},1024)]))),128))])),u("div",he,[t(C,null,{default:o(()=>[t(ee,{justify:"center"},{default:o(()=>[t(Y,{cols:"8"},{default:o(()=>[t(C,{class:"max-width"},{default:o(()=>[t(Q,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l),length:s.value.totalPages||1,class:"my-4",onInput:i},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1}),t(N,{class:"dialog",modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=l=>_.value=l)},{default:o(()=>[t(F,null,{default:o(()=>[t(te,{class:"dialog-title"},{default:o(()=>e[11]||(e[11]=[d("Editar Producto")])),_:1}),t(L,null,{default:o(()=>[t(me,{product:$.value,onSave:G},null,8,["product"])]),_:1}),t(U,null,{default:o(()=>[t(c,{class:"cancel-button",onClick:e[3]||(e[3]=l=>_.value=!1)},{default:o(()=>e[12]||(e[12]=[d(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(N,{class:"dialog",modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=l=>m.value=l)},{default:o(()=>[t(F,null,{default:o(()=>[t(L,null,{default:o(()=>[t(pe,{product:E.value,onDeleted:X},null,8,["product"])]),_:1}),t(U,null,{default:o(()=>[t(c,{class:"cancel-button",text:"",onClick:e[5]||(e[5]=l=>m.value=!1)},{default:o(()=>e[13]||(e[13]=[d(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),g.value?(v(),A(C,{key:2},{default:o(()=>[t(ae)]),_:1})):de("",!0)],64)}}},Ee=ne($e,[["__scopeId","data-v-1104ea44"]]),Be={__name:"list",setup(M){return(V,h)=>(v(),A(Ee))}};export{Be as default};
