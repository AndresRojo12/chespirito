import{_ as h,u as V,r as c,m as d,o as x,c as I,a as t,b as n,w as m,C as v,d as B,z as E,n as N}from"./DX0_N7Ks.js";import{u as S}from"./DAMZN2oP.js";import{S as f}from"./DOYwHpwi.js";const U={class:"card"},O={class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},P={__name:"LoginUser",setup(_){const p=E(),a=V(),g=S(),r=c(""),i=c(""),s=c(!1),w=async()=>{try{const o=await fetch(`${p.public.API_BASE_URL}auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.value,password:i.value})}),e=await o.json();o.ok?(g.login(e.token,e.user),a.push("/user/gestion")):f.fire({icon:"error",title:"Error",text:e.message})}catch(o){console.error("Error logging in",o),f.fire({icon:"error",title:"Error",text:"Hubo un problema al iniciar sesión. Inténtalo de nuevo."})}},b=()=>{s.value=!s.value},y=()=>{a.push("/user/change-password")};return(o,e)=>{const u=d("v-text-field"),k=d("v-btn"),C=d("v-card");return x(),I("div",U,[e[6]||(e[6]=t("h1",{class:"title"},"Iniciar sesión",-1)),n(C,{class:"mx-auto pa-12 pb-8",elevation:"8","max-width":"350",rounded:"lg"},{default:m(()=>[e[5]||(e[5]=t("div",{class:"text-subtitle-1 text-medium-emphasis color-#009c8c"},[t("p",{class:"form-text"},"Correo electrónico")],-1)),n(u,{class:"input",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),density:"compact",placeholder:"Dirección de correo","prepend-inner-icon":"mdi-email-outline",variant:"outlined",autocomplete:"email",name:"email",id:"email"},null,8,["modelValue"]),t("div",O,[e[3]||(e[3]=t("p",{class:"form-text"},"Contraseña",-1)),t("a",{class:"password-text text-caption text-decoration-none",href:"#",rel:"noopener noreferrer",target:"blank",onClick:v(y,["prevent"])},e[2]||(e[2]=[t("p",{class:"password-text"},"¿Olvidó su contraseña?",-1)]))]),n(u,{class:"input",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),"append-inner-icon":s.value?"mdi-eye-off":"mdi-eye",type:s.value?"text":"password",density:"compact",placeholder:"Ingrese su contraseña","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onClick:appendInner":b,autocomplete:"current-password",name:"password",id:"password"},null,8,["modelValue","append-inner-icon","type"]),n(k,{class:"button mb-8",size:"large",variant:"tonal",block:"",onClick:v(w,["prevent"])},{default:m(()=>e[4]||(e[4]=[B(" Iniciar ")])),_:1})]),_:1})])}}},j=h(P,[["__scopeId","data-v-3b85e900"]]),T={__name:"index",setup(_){return(p,a)=>(x(),N(j))}};export{T as default};
