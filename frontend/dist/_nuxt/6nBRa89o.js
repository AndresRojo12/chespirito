import{_ as K,A as X,D as h,r as g,s as ee,v as te,g as le,m,o as r,c as d,a as u,b as o,w as s,d as f,C as ae,x as l,H as M,n as B,F as _,y as b,t as v,G as F,z as oe}from"./DzSD3iaJ.js";import{m as ne}from"./BJ_t5Q7L.js";import{u as R}from"./CSkv7lNe.js";const ue={class:"header-container"},re={class:"text-left"},se={class:"text-left"},de={class:"text-left"},ie={class:"text-left"},me={class:"text-left"},ce={class:"text-left"},pe={class:"text-left"},ve={class:"text-left"},ge={class:"text-left"},ye={class:"text-left"},fe={key:2,style:{"text-align":"center"}},_e={class:"text-center"},Ve={__name:"SalesGrid",setup(Y){const I=oe(),G=X(),{mdAndUp:z}=h(),D=z,V=g(1),N=g(10),E=g(10),x=g([]),U=g([]),w=g([]),y=g([]),a=g({categoryId:"",categoryName:"",productId:"",productName:"",quantitySold:"",salePrice:"",created_at:""}),S=g(!1),$=async()=>{S.value=!1;try{const{data:n,error:e}=await R(`${I.public.API_BASE_URL}sales?page=${V.value}
      &pageSize=${N.value}&categoryId=${a.value.categoryId}&categoryName=${a.value.categoryName}&productId=${a.value.productId}&productName=${a.value.productName}&quantitySold=${a.value.quantitySold}&salePrice=${a.value.salePrice}&createdAt=${a.value.created_at}`,{method:"GET"},"$CP5fcewpS2");if(e.value||!n.value){S.value=!0,x.value=[],y.value=[];return}x.value=n.value.data,E.value=n.value.totalPages,A()}catch(n){console.log(n),S.value=!0}},L=async()=>{try{const{data:n}=await R(`${I.public.API_BASE_URL}categories`,{method:"GET"},"$8jYQUjC1FG");U.value=n.value.data,A()}catch(n){console.log(n)}},j=async()=>{try{const{data:n}=await R(`${I.public.API_BASE_URL}products`,{method:"GET"},"$nlNlZs5NtW");w.value=n.value.data,A()}catch(n){console.log(n)}},A=()=>{x.value.length>0&&U.value.length>0&&w.value.length>0&&(y.value=x.value.map(n=>{const e=U.value.find(C=>C.id===n.categoryId),P=w.value.find(C=>C.id===n.productId);return{...n,categoryName:e?e.name:n.products.category.name,productName:P?P.name:n.products.name}}))};ee(async()=>{await te(),await $(),await L(),await j()});const i=n=>{V.value=n,$()};le([V,N,a],()=>{$()});const c=n=>{a.value[n]="",i(1),$()},H=()=>{G.push("/sales/register")};return(n,e)=>{const P=m("v-btn"),C=m("v-select"),p=m("v-text-field"),k=m("v-list-item"),T=m("v-table"),O=m("v-responsive"),Q=m("v-alert"),q=m("v-container"),W=m("v-pagination"),Z=m("v-col"),J=m("v-row");return r(),d(_,null,[u("div",ue,[o(P,{class:"register-button",onClick:ae(H,["prevent"])},{default:s(()=>e[32]||(e[32]=[f("Registrar ventas")])),_:1}),o(C,{class:"page-select",label:"Seleccionar número de items por página",modelValue:l(N),"onUpdate:modelValue":e[0]||(e[0]=t=>M(N)?N.value=t:null),items:[10,20,30,40,50,100],onChange:$},null,8,["modelValue"])]),o(q,null,{default:s(()=>[l(D)?F("",!0):(r(),B(O,{key:0},{default:s(()=>[o(T,{style:{width:"100%"}},{default:s(()=>[u("thead",null,[u("th",re,[o(p,{modelValue:l(a).categoryName,"onUpdate:modelValue":e[1]||(e[1]=t=>l(a).categoryName=t),label:"Categoría",clearable:"",onInput:e[2]||(e[2]=t=>i(1)),"onClick:clear":e[3]||(e[3]=t=>c("categoryName"))},null,8,["modelValue"]),(r(!0),d(_,null,b(l(y),t=>(r(),d("tr",{key:t.id},[o(k,null,{default:s(()=>[f(v(t.categoryName),1)]),_:2},1024)]))),128))]),u("th",se,[o(p,{modelValue:l(a).productName,"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).productName=t),label:"Producto",clearable:"",onInput:e[5]||(e[5]=t=>i(1)),"onClick:clear":e[6]||(e[6]=t=>c("productName"))},null,8,["modelValue"]),(r(!0),d(_,null,b(l(y),t=>(r(),d("tr",{key:t.id},[o(k,null,{default:s(()=>[f(v(t.productName),1)]),_:2},1024)]))),128))]),u("th",de,[o(p,{modelValue:l(a).quantitySold,"onUpdate:modelValue":e[7]||(e[7]=t=>l(a).quantitySold=t),label:"Cantidad",clearable:"",onInput:e[8]||(e[8]=t=>i(1)),"onClick:clear":e[9]||(e[9]=t=>c("quantitySold"))},null,8,["modelValue"]),(r(!0),d(_,null,b(l(y),t=>(r(),d("tr",{key:t.id},[o(k,null,{default:s(()=>[f(v(t.quantitySold),1)]),_:2},1024)]))),128))]),u("th",ie,[o(p,{modelValue:l(a).salePrice,"onUpdate:modelValue":e[10]||(e[10]=t=>l(a).salePrice=t),label:"Total",clearable:"",onInput:e[11]||(e[11]=t=>i(1)),"onClick:clear":e[12]||(e[12]=t=>c("salePrice"))},null,8,["modelValue"]),(r(!0),d(_,null,b(l(y),t=>(r(),d("tr",{key:t.id},[o(k,null,{default:s(()=>[f(v(t.salePrice),1)]),_:2},1024)]))),128))]),u("th",me,[o(p,{modelValue:l(a).created_at,"onUpdate:modelValue":e[13]||(e[13]=t=>l(a).created_at=t),label:"Fecha",clearable:"",onInput:e[14]||(e[14]=t=>i(1)),"onClick:clear":e[15]||(e[15]=t=>c("created_at"))},null,8,["modelValue"]),(r(!0),d(_,null,b(l(y),t=>(r(),d("tr",{key:t.id},[o(k,null,{default:s(()=>[f(v(t.createdAt),1)]),_:2},1024)]))),128))])])]),_:1})]),_:1})),l(D)?(r(),B(T,{key:1},{default:s(()=>[u("thead",null,[u("tr",null,[u("th",ce,[o(p,{modelValue:l(a).categoryName,"onUpdate:modelValue":e[16]||(e[16]=t=>l(a).categoryName=t),label:"Categoría",clearable:"",onInput:e[17]||(e[17]=t=>i(1)),"onClick:clear":e[18]||(e[18]=t=>c("categoryName"))},null,8,["modelValue"])]),u("th",pe,[o(p,{modelValue:l(a).productName,"onUpdate:modelValue":e[19]||(e[19]=t=>l(a).productName=t),label:"Producto",clearable:"",onInput:e[20]||(e[20]=t=>i(1)),"onClick:clear":e[21]||(e[21]=t=>c("productName"))},null,8,["modelValue"])]),u("th",ve,[o(p,{modelValue:l(a).quantitySold,"onUpdate:modelValue":e[22]||(e[22]=t=>l(a).quantitySold=t),label:"Cantidad",clearable:"",onInput:e[23]||(e[23]=t=>i(1)),"onClick:clear":e[24]||(e[24]=t=>c("quantitySold"))},null,8,["modelValue"])]),u("th",ge,[o(p,{modelValue:l(a).salePrice,"onUpdate:modelValue":e[25]||(e[25]=t=>l(a).salePrice=t),label:"Total",clearable:"",onInput:e[26]||(e[26]=t=>i(1)),"onClick:clear":e[27]||(e[27]=t=>c("salePrice"))},null,8,["modelValue"])]),u("th",ye,[o(p,{modelValue:l(a).created_at,"onUpdate:modelValue":e[28]||(e[28]=t=>l(a).created_at=t),label:"Fecha",clearable:"",onInput:e[29]||(e[29]=t=>i(1)),"onClick:clear":e[30]||(e[30]=t=>c("created_at"))},null,8,["modelValue"])])])]),u("tbody",null,[(r(!0),d(_,null,b(l(y),t=>(r(),d("tr",{key:t.id},[u("td",null,v(t.categoryName),1),u("td",null,v(t.productName),1),u("td",null,v(t.quantitySold),1),u("td",null,v(t.salePrice),1),u("td",null,v(l(ne)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1)]))),128))])]),_:1})):F("",!0),l(S)?(r(),d("div",fe,[o(Q,{color:"#009c8c",type:"warning"},{default:s(()=>e[33]||(e[33]=[f(" No se encontraron registros. ")])),_:1})])):F("",!0)]),_:1}),u("div",_e,[o(q,null,{default:s(()=>[o(J,{justify:"center"},{default:s(()=>[o(Z,{cols:"8"},{default:s(()=>[o(q,{class:"max-width"},{default:s(()=>[o(W,{modelValue:l(V),"onUpdate:modelValue":e[31]||(e[31]=t=>M(V)?V.value=t:null),length:l(E),onInput:$,class:"my-4"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})])],64)}}},$e=K(Ve,[["__scopeId","data-v-f904bd50"]]),ke={__name:"list",setup(Y){return(I,G)=>(r(),B($e))}};export{ke as default};
