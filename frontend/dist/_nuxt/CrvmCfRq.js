import{_ as de,A as ie,D as ve,r as i,s as me,v as ce,g as pe,m as s,o as r,c as d,a as u,b as l,w as n,d as c,C as _e,x as $,n as B,F as V,y as b,t as f,E as j,G as E,z as fe}from"./DzSD3iaJ.js";import{m as w}from"./BJ_t5Q7L.js";import{I as ge}from"./BpXFFhPr.js";import{u as W}from"./CSkv7lNe.js";import"./DOYwHpwi.js";const Ve={class:"header-container"},xe={class:"text-left"},ye={class:"text-left"},$e={class:"text-left"},be={class:"text-left"},ke={class:"text-left"},Ie={class:"text-left"},Ae={class:"text-left"},Ce={class:"text-left"},Ne={class:"text-left"},we={key:2,style:{"text-align":"center","margin-top":"20px"}},Ue={class:"text-center"},Ye={__name:"InventoryGrid",setup(X){const U=fe(),F=ie(),{mdAndUp:Z}=ve(),M=Z,x=i([]),Y=i([]),v=i([]),k=i(!1),P=i(null),I=i(1),C=i(10),z=i(1),o=i({salesId:"",productName:"",status:"",created_at:"",updated_at:""}),A=i(!1),g=async()=>{A.value=!1;try{const{data:a,error:e}=await W(`${U.public.API_BASE_URL}inventories?page=${I.value}
      &pageSize=${C.value}&status=${o.value.status}&salesId=${o.value.salesId}&productName=${o.value.productName}&createdAt=${o.value.created_at}&updatedAt=${o.value.updated_at}`,{method:"GET"},"$Rsup4iOXk2");if(e.value||!a.value){A.value=!0,x.value=[],v.value=[];return}x.value=a.value.data,z.value=a.value.totalPages,S(),v.value.length===0&&(A.value=!0)}catch(a){console.log(a),A.value=!0}},q=async()=>{try{const{data:a,error:e}=await W(`${U.public.API_BASE_URL}sales`,{method:"GET"},"$ZIEFPrrBWB");Y.value=a.value.data,S()}catch(a){console.log(a)}};me(async()=>{await ce(),await q(),await g()});const S=()=>{x.value.length>0&&Y.value.length>0&&(v.value=x.value.map(a=>{const e=Y.value.find(y=>y.id===a.salesId);return{...a,productName:e?e.products.name:a.sales.products.name}}))},m=a=>{I.value=a,g()};pe([I,C,o],()=>{g()});const p=a=>{o.value[a]="",m(1),g()},R=a=>{a&&a.id?(P.value={...a},k.value=!0):console.error("No se puede editar")},H=async a=>{if(a){const e=x.value.findIndex(y=>y.id===a.id);e!==-1&&(x.value[e]=a)}await g(),k.value=!1},J=()=>{F.push("/inventory/register")};return(a,e)=>{const y=s("v-btn"),K=s("v-select"),_=s("v-text-field"),N=s("v-list-item"),G=s("v-icon"),T=s("v-tooltip"),L=s("v-table"),Q=s("v-response"),h=s("v-alert"),ee=s("container"),te=s("v-pagination"),O=s("v-container"),le=s("v-col"),ae=s("v-row"),oe=s("v-card-text"),ne=s("v-card-actions"),ue=s("v-card"),se=s("v-dialog");return r(),d(V,null,[u("div",Ve,[l(y,{class:"register-button",onClick:_e(J,["prevent"])},{default:n(()=>e[28]||(e[28]=[c(" Registrar Inventario ")])),_:1}),l(K,{class:"page-select",modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=t=>C.value=t),items:[5,10,20,30,40,50,100],label:"Seleccionar datos por Página",onChange:g},null,8,["modelValue"])]),l(ee,null,{default:n(()=>[$(M)?E("",!0):(r(),B(Q,{key:0},{default:n(()=>[l(L,{style:{width:"100%"}},{default:n(()=>[u("thead",null,[u("th",xe,[l(_,{modelValue:o.value.productName,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.productName=t),label:"Producto vendido",clearable:"",onInput:e[2]||(e[2]=t=>m(1)),"onClick:clear":e[3]||(e[3]=t=>p("productName"))},null,8,["modelValue"]),(r(!0),d(V,null,b(v.value,t=>(r(),d("tr",{key:t.id},[l(N,null,{default:n(()=>[c(f(t.productName),1)]),_:2},1024)]))),128))]),u("th",ye,[l(_,{modelValue:o.value.status,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.status=t),label:"Estado de producto",clearable:"",onInput:e[5]||(e[5]=t=>m(1)),"onClick:clear":e[6]||(e[6]=t=>p("status"))},null,8,["modelValue"]),(r(!0),d(V,null,b(v.value,t=>(r(),d("tr",{key:t.id},[l(N,null,{default:n(()=>[c(f(t.status),1)]),_:2},1024)]))),128))]),u("th",$e,[l(_,{modelValue:o.value.created_at,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.created_at=t),label:"Fecha de registro",clearable:"",onInput:e[8]||(e[8]=t=>m(1)),"onClick:clear":e[9]||(e[9]=t=>p("created_at"))},null,8,["modelValue"]),(r(!0),d(V,null,b(v.value,t=>(r(),d("tr",{key:t.id},[l(N,null,{default:n(()=>[c(f($(w)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1)]),_:2},1024)]))),128))]),u("th",be,[l(_,{modelValue:o.value.updated_at,"onUpdate:modelValue":e[10]||(e[10]=t=>o.value.updated_at=t),label:"Fecha actualización",clearable:"",onInput:e[11]||(e[11]=t=>m(1)),"onClick:clear":e[12]||(e[12]=t=>p("updated_at"))},null,8,["modelValue"]),(r(!0),d(V,null,b(v.value,t=>(r(),d("tr",{key:t.id},[l(N,null,{default:n(()=>[c(f($(w)(t.updatedAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1)]),_:2},1024)]))),128))]),u("th",ke,[e[30]||(e[30]=u("td",null,"Acciones",-1)),(r(!0),d(V,null,b(v.value,t=>(r(),d("tr",{key:t.id},[l(T,{text:"Editar"},{activator:n(({props:D})=>[l(G,j({style:{color:"#009c8c"},ref_for:!0},D,{onClick:re=>R(t)}),{default:n(()=>e[29]||(e[29]=[c(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)]))),128))])])]),_:1})]),_:1})),$(M)?(r(),B(L,{key:1},{default:n(()=>[u("thead",null,[u("tr",null,[u("th",Ie,[l(_,{modelValue:o.value.productName,"onUpdate:modelValue":e[13]||(e[13]=t=>o.value.productName=t),label:"Producto vendido",clearable:"",onInput:e[14]||(e[14]=t=>m(1)),"onClick:clear":e[15]||(e[15]=t=>p("productName"))},null,8,["modelValue"])]),u("th",Ae,[l(_,{modelValue:o.value.status,"onUpdate:modelValue":e[16]||(e[16]=t=>o.value.status=t),label:"Estado de producto",clearable:"",onInput:e[17]||(e[17]=t=>m(1)),"onClick:clear":e[18]||(e[18]=t=>p("status"))},null,8,["modelValue"])]),u("th",Ce,[l(_,{modelValue:o.value.created_at,"onUpdate:modelValue":e[19]||(e[19]=t=>o.value.created_at=t),label:"Fecha de registro",clearable:"",onInput:e[20]||(e[20]=t=>m(1)),"onClick:clear":e[21]||(e[21]=t=>p("created_at"))},null,8,["modelValue"])]),u("th",Ne,[l(_,{modelValue:o.value.updated_at,"onUpdate:modelValue":e[22]||(e[22]=t=>o.value.updated_at=t),label:"Fecha actualización",clearable:"",onInput:e[23]||(e[23]=t=>m(1)),"onClick:clear":e[24]||(e[24]=t=>p("updated_at"))},null,8,["modelValue"])]),e[31]||(e[31]=u("th",{class:"text-left"},"Acciones",-1))])]),u("tbody",null,[(r(!0),d(V,null,b(v.value,t=>(r(),d("tr",{key:t.id},[u("td",null,f(t.productName),1),u("td",null,f(t.status),1),u("td",null,f($(w)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1),u("td",null,f($(w)(t.updatedAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1),l(T,{text:"Editar"},{activator:n(({props:D})=>[l(G,j({style:{color:"#009c8c"},ref_for:!0},D,{onClick:re=>R(t)}),{default:n(()=>e[32]||(e[32]=[c(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)]))),128))])]),_:1})):E("",!0),A.value?(r(),d("div",we,[l(h,{color:"#009c8c",type:"warning"},{default:n(()=>e[33]||(e[33]=[c("No se encontraron registros.")])),_:1})])):E("",!0)]),_:1}),u("div",Ue,[l(O,null,{default:n(()=>[l(ae,{justify:"center"},{default:n(()=>[l(le,{col:"8"},{default:n(()=>[l(O,{class:"max-width"},{default:n(()=>[l(te,{modelValue:I.value,"onUpdate:modelValue":e[25]||(e[25]=t=>I.value=t),length:z.value,onInput:g,class:"my-4"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})]),l(se,{class:"dialog",modelValue:k.value,"onUpdate:modelValue":e[27]||(e[27]=t=>k.value=t)},{default:n(()=>[l(ue,null,{default:n(()=>[e[35]||(e[35]=u("h1",{class:"dialog-title"},"Editar estado",-1)),l(oe,null,{default:n(()=>[l(ge,{inventory:P.value,onSave:H},null,8,["inventory"])]),_:1}),l(ne,null,{default:n(()=>[l(y,{class:"cancel-button",text:"",onClick:e[26]||(e[26]=t=>k.value=!1)},{default:n(()=>e[34]||(e[34]=[c(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},De=de(Ye,[["__scopeId","data-v-0e13c1a9"]]),ze={__name:"list",setup(X){return(U,F)=>(r(),B(De))}};export{ze as default};
