import{_ as G,r as f,E as H,q as h,s as k,c as g,x as S,b as e,D as C,a as l,n as O,w as i,d as j,t as Y,F as J,u as K,p as Q,m as o,o as p,C as d,a6 as X,a7 as Z,z as ee}from"./PexJTClo.js";import{u as te}from"./BLW05cs-.js";import{S as oe}from"./DOYwHpwi.js";import{L as ne}from"./CIAY-Gyt.js";const ae={key:0},se={key:1},re={class:"footer"},le={class:"footer-bottom"},ie={__name:"default",setup(ce){const b=ee(),c=te(),v=f(null),u=K(),y=Q(),{mdAndUp:B}=H(),s=f(!1),n=f(!0),m=h(()=>B.value),A=h(()=>n.value?55:155);k(()=>{c.loadUserFromStorage(),s.value=m.value&&c.isAuthenticated});const x=async()=>{try{const t=localStorage.getItem("token"),_=await(await fetch(`${b.public.API_BASE_URL}auth/me`,{headers:{Authorization:`Bearer ${t}`}})).json();v.value=_}catch(t){console.log(t)}};k(async()=>{await x()});const E=()=>{n.value=!1},I=()=>{n.value=!0},D=h(()=>["/user/gestion","/product/list","/sales/list","/inventory/list"].includes(y.path)),V=()=>{s.value=!s.value,n.value=!s.value},L=()=>{u.push("/user/gestion")},F=()=>{u.push("/product/list")},M=()=>{u.push("/sales/list")},N=()=>{u.push("/inventory/list")},P=()=>{oe.fire({title:"¿Seguro quieres cerrar sesión?",icon:"question",showCancelButton:!0,confirmButtonText:"Si,cerrar sesión",cancelButtonText:"Cancelar",confirmButtonColor:"#1179E1",cancelButtonColor:"#8F9294",background:"#f2f2f2",color:"#333333",iconColor:"#1179E1"}).then(t=>{t.isConfirmed&&R()})},R=()=>{c.logout(),u.push("/")};return(t,a)=>{const _=o("v-app-bar-nav-icon"),r=o("v-list-item"),w=o("v-list"),U=o("v-divider"),T=o("v-navigation-drawer"),$=o("v-container"),q=o("v-main"),z=o("v-app");return p(),g(J,null,[S(c).loading?(p(),g("div",ae,[e(ne)])):C("",!0),S(c).isAuthenticated?(p(),g("div",se,[l("div",null,[D.value?(p(),O(_,{key:0,class:"icon-navbar",onClick:V,app:""})):C("",!0),a[2]||(a[2]=l("h1",{class:"title"},"ANTIGÜEDADES CHESPIRITO",-1)),e(z,null,{default:i(()=>[e(T,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=W=>s.value=W),app:"",fixed:"",width:A.value,rail:n.value,"expand-on-hover":m.value,temporary:!m.value,onMouseenter:E,onMouseleave:I},{default:i(()=>[e(w,null,{default:i(()=>[e(r,{class:"buttons",title:`${v.value?v.value.role:"Usuario"}`,"prepend-icon":"mdi-account-circle"},null,8,["title"])]),_:1}),e(U),e(w,{density:"compact",nav:""},{default:i(()=>[e(r,{class:"buttons",title:"Inicio","prepend-icon":"mdi-home-city",onClick:d(L,["prevent"])}),e(r,{class:"buttons",title:"Productos","prepend-icon":"mdi-cash",onClick:d(F,["prevent"])}),e(r,{class:"buttons",title:"Ventas","prepend-icon":"mdi-elevation-rise",onClick:d(M,["prevent"])}),e(r,{class:"buttons",title:"Inventarios","prepend-icon":"mdi-clipboard-text",onClick:d(N,["prevent"])}),e(r,{class:"buttons",title:"Salir","prepend-icon":"mdi-logout",onClick:d(P,["prevent"])})]),_:1})]),_:1},8,["modelValue","width","rail","expand-on-hover","temporary"]),e(q,{class:X({"main-expanded":n.value,"main-collapsed":!n.value}),app:""},{default:i(()=>[e($,{fluid:""},{default:i(()=>[Z(t.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["class"])]),_:3}),l("footer",re,[l("div",null,[l("div",le,[j(Y(new Date().getFullYear())+" — ",1),a[1]||(a[1]=l("strong",null,"Antigüedades Chespirito",-1))])])])])])):C("",!0)],64)}}},me=G(ie,[["__scopeId","data-v-21964ea8"]]);export{me as default};
