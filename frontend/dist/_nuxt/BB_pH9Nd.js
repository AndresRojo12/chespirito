import{_ as V,u as I,r as l,m as d,o as m,c as x,a as o,b as s,w as g,C as w,d as B,D as L,z as N,n as S}from"./DkewYONJ.js";import{u as U}from"./C59e9RXd.js";import{S as p}from"./DOYwHpwi.js";import{L as F}from"./Cz6vfwWj.js";const P={class:"card"},O={class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"},T={key:0},j={__name:"LoginUser",setup(b){const f=N(),c=I(),C=U(),a=l(""),r=l(""),i=l(!1),t=l(!1),y=async()=>{if(!a.value||!r.value){p.fire({icon:"warning",title:"Campos incompletos",text:"Por favor ingresa tu correo electrónico y contraseña.",confirmButtonColor:"#1179E1",iconColor:"#FF1E1E"});return}t.value=!0;try{const n=await fetch(`${f.public.API_BASE_URL}auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.value,password:r.value})}),e=await n.json();n.ok?(C.login(e.token),t.value=!1,c.push("/user/gestion")):(t.value=!1,p.fire({icon:"error",title:"Error de inicio de sesión",text:e.message||"Usuario o contraseña incorrectos.",confirmButtonColor:"#1179E1",iconColor:"#FF1E1E"}))}catch(n){console.error("Error logging in",n),t.value=!1,p.fire({icon:"error",title:"Error",text:"Hubo un problema al iniciar sesión. Inténtalo de nuevo."})}},h=()=>{c.push("/user/change-password")},v=()=>{i.value=!i.value};return(n,e)=>{const _=d("v-text-field"),k=d("v-btn"),E=d("v-card");return m(),x("div",P,[e[6]||(e[6]=o("h1",{class:"title"},"Iniciar sesión",-1)),s(E,{class:"mx-auto pa-12 pb-8",elevation:"8","max-width":"350",rounded:"lg"},{default:g(()=>[e[5]||(e[5]=o("div",{class:"text-subtitle-1 text-medium-emphasis color-#009c8c"},[o("p",{class:"form-text"},"Correo electrónico")],-1)),s(_,{class:"input",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value=u),density:"compact",placeholder:"Dirección de correo","prepend-inner-icon":"mdi-email-outline",variant:"outlined",autocomplete:"email",name:"email",id:"email"},null,8,["modelValue"]),o("div",O,[e[3]||(e[3]=o("p",{class:"form-text"},"Contraseña",-1)),o("a",{class:"password-text text-caption text-decoration-none",href:"#",rel:"noopener noreferrer",target:"blank",onClick:w(h,["prevent"])},e[2]||(e[2]=[o("p",{class:"password-text"},"¿Olvidó su contraseña?",-1)]))]),s(_,{class:"input",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=u=>r.value=u),type:i.value?"text":"password","append-inner-icon":i.value?"mdi-eye-off":"mdi-eye",density:"compact",placeholder:"Ingrese su contraseña","prepend-inner-icon":"mdi-lock-outline",variant:"outlined","onMousedown:appendInner":v,"onTouchstart:appendInner":v,autocomplete:"current-password",name:"password",id:"password"},null,8,["modelValue","type","append-inner-icon"]),s(k,{class:"button mb-8",size:"large",variant:"tonal",block:"",onClick:w(y,["prevent"])},{default:g(()=>e[4]||(e[4]=[B(" Iniciar ")])),_:1})]),_:1}),t.value?(m(),x("div",T,[s(F)])):L("",!0)])}}},A=V(j,[["__scopeId","data-v-f127c573"]]),$={__name:"index",setup(b){return(f,c)=>(m(),S(A))}};export{$ as default};
