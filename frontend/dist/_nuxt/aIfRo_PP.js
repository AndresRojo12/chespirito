import{L as K}from"./DKrGet5X.js";import{_ as X,A as h,r as p,E as ee,s as te,v as le,g as ae,m as g,o as u,c as d,a as r,b as n,w as s,d as V,C as oe,x as l,H as M,n as A,F as $,y as k,t as v,D as w,z as ne}from"./Bi-YAAcS.js";import{m as ue}from"./BJ_t5Q7L.js";import{u as E}from"./G8Xyjgfx.js";const re={class:"header-container"},de={class:"text-left"},se={class:"text-left"},ie={class:"text-left"},me={class:"text-left"},ce={class:"text-left"},pe={key:2,style:{"text-align":"center"}},ve={class:"text-center"},ge={__name:"SalesGrid",setup(Y){const S=ne(),L=h(),f=p(!1),{mdAndUp:z}=ee(),D=z,b=p(1),C=p(10),G=p(10),P=p([]),q=p([]),F=p([]),y=p([]),a=p({categoryId:"",categoryName:"",productId:"",productName:"",quantitySold:"",salePrice:"",created_at:""}),x=p(!1),N=async()=>{f.value=!0,x.value=!1;try{const{data:o,error:e}=await E(`${S.public.API_BASE_URL}sales?page=${b.value}
      &pageSize=${C.value}&categoryId=${a.value.categoryId}&categoryName=${a.value.categoryName}&productId=${a.value.productId}&productName=${a.value.productName}&quantitySold=${a.value.quantitySold}&salePrice=${a.value.salePrice}&createdAt=${a.value.created_at}`,{method:"GET"},"$CP5fcewpS2");if(e.value||!o.value){x.value=!0,P.value=[],y.value=[];return}P.value=o.value.data,G.value=o.value.totalPages,R(),f.value=!0}catch(o){console.log(o),x.value=!0}},j=async()=>{f.value=!0;try{const{data:o}=await E(`${S.public.API_BASE_URL}categories`,{method:"GET"},"$8jYQUjC1FG");q.value=o.value.data,R(),f.value=!1}catch(o){console.log(o)}},H=async()=>{f.value=!0;try{const{data:o}=await E(`${S.public.API_BASE_URL}products`,{method:"GET"},"$nlNlZs5NtW");F.value=o.value.data,R(),f.value=!1}catch(o){console.log(o)}},R=()=>{P.value.length>0&&q.value.length>0&&F.value.length>0&&(y.value=P.value.map(o=>{const e=q.value.find(I=>I.id===o.categoryId),U=F.value.find(I=>I.id===o.productId);return{...o,categoryName:e?e.name:o.products.category.name,productName:U?U.name:o.products.name}}))};te(async()=>{await le(),await N(),await j(),await H()});const i=o=>{b.value=o,N()};ae([b,C,a],()=>{N()});const m=o=>{a.value[o]="",i(1),N()},O=()=>{L.push("/sales/register")};return(o,e)=>{const U=g("v-btn"),I=g("v-select"),c=g("v-text-field"),_=g("v-col"),T=g("v-table"),Q=g("v-alert"),W=g("v-pagination"),B=g("v-container"),Z=g("v-row"),J=K;return u(),d($,null,[r("div",re,[n(U,{class:"register-button",onClick:oe(O,["prevent"])},{default:s(()=>e[32]||(e[32]=[V("Registrar ventas")])),_:1}),n(I,{class:"page-select",label:"Seleccionar número de items por página",modelValue:l(C),"onUpdate:modelValue":e[0]||(e[0]=t=>M(C)?C.value=t:null),items:[10,20,30,40,50,100],onChange:N},null,8,["modelValue"])]),l(D)?w("",!0):(u(),A(T,{key:0},{default:s(()=>[r("thead",null,[n(c,{modelValue:l(a).categoryName,"onUpdate:modelValue":e[1]||(e[1]=t=>l(a).categoryName=t),label:"Categoría",clearable:"",onInput:e[2]||(e[2]=t=>i(1)),"onClick:clear":e[3]||(e[3]=t=>m("categoryName"))},null,8,["modelValue"]),(u(!0),d($,null,k(l(y),t=>(u(),d("tr",{key:t.id},[n(_,null,{default:s(()=>[V(v(t.categoryName),1)]),_:2},1024)]))),128)),n(c,{modelValue:l(a).productName,"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).productName=t),label:"Producto",clearable:"",onInput:e[5]||(e[5]=t=>i(1)),"onClick:clear":e[6]||(e[6]=t=>m("productName"))},null,8,["modelValue"]),(u(!0),d($,null,k(l(y),t=>(u(),d("tr",{key:t.id},[n(_,null,{default:s(()=>[V(v(t.productName),1)]),_:2},1024)]))),128)),n(c,{modelValue:l(a).quantitySold,"onUpdate:modelValue":e[7]||(e[7]=t=>l(a).quantitySold=t),label:"Cantidad",clearable:"",onInput:e[8]||(e[8]=t=>i(1)),"onClick:clear":e[9]||(e[9]=t=>m("quantitySold"))},null,8,["modelValue"]),(u(!0),d($,null,k(l(y),t=>(u(),d("tr",{key:t.id},[n(_,null,{default:s(()=>[V(v(t.quantitySold),1)]),_:2},1024)]))),128)),n(c,{modelValue:l(a).salePrice,"onUpdate:modelValue":e[10]||(e[10]=t=>l(a).salePrice=t),label:"Total",clearable:"",onInput:e[11]||(e[11]=t=>i(1)),"onClick:clear":e[12]||(e[12]=t=>m("salePrice"))},null,8,["modelValue"]),(u(!0),d($,null,k(l(y),t=>(u(),d("tr",{key:t.id},[n(_,null,{default:s(()=>[V(v(t.salePrice),1)]),_:2},1024)]))),128)),n(c,{modelValue:l(a).created_at,"onUpdate:modelValue":e[13]||(e[13]=t=>l(a).created_at=t),label:"Fecha",clearable:"",onInput:e[14]||(e[14]=t=>i(1)),"onClick:clear":e[15]||(e[15]=t=>m("created_at"))},null,8,["modelValue"]),(u(!0),d($,null,k(l(y),t=>(u(),d("tr",{key:t.id},[n(_,null,{default:s(()=>[V(v(t.createdAt),1)]),_:2},1024)]))),128))])]),_:1})),l(D)?(u(),A(T,{key:1},{default:s(()=>[r("thead",null,[r("tr",null,[r("th",de,[n(c,{modelValue:l(a).categoryName,"onUpdate:modelValue":e[16]||(e[16]=t=>l(a).categoryName=t),label:"Categoría",clearable:"",onInput:e[17]||(e[17]=t=>i(1)),"onClick:clear":e[18]||(e[18]=t=>m("categoryName"))},null,8,["modelValue"])]),r("th",se,[n(c,{modelValue:l(a).productName,"onUpdate:modelValue":e[19]||(e[19]=t=>l(a).productName=t),label:"Producto",clearable:"",onInput:e[20]||(e[20]=t=>i(1)),"onClick:clear":e[21]||(e[21]=t=>m("productName"))},null,8,["modelValue"])]),r("th",ie,[n(c,{modelValue:l(a).quantitySold,"onUpdate:modelValue":e[22]||(e[22]=t=>l(a).quantitySold=t),label:"Cantidad",clearable:"",onInput:e[23]||(e[23]=t=>i(1)),"onClick:clear":e[24]||(e[24]=t=>m("quantitySold"))},null,8,["modelValue"])]),r("th",me,[n(c,{modelValue:l(a).salePrice,"onUpdate:modelValue":e[25]||(e[25]=t=>l(a).salePrice=t),label:"Total",clearable:"",onInput:e[26]||(e[26]=t=>i(1)),"onClick:clear":e[27]||(e[27]=t=>m("salePrice"))},null,8,["modelValue"])]),r("th",ce,[n(c,{modelValue:l(a).created_at,"onUpdate:modelValue":e[28]||(e[28]=t=>l(a).created_at=t),label:"Fecha",clearable:"",onInput:e[29]||(e[29]=t=>i(1)),"onClick:clear":e[30]||(e[30]=t=>m("created_at"))},null,8,["modelValue"])])])]),r("tbody",null,[(u(!0),d($,null,k(l(y),t=>(u(),d("tr",{key:t.id},[r("td",null,v(t.categoryName),1),r("td",null,v(t.productName),1),r("td",null,v(t.quantitySold),1),r("td",null,v(t.salePrice),1),r("td",null,v(l(ue)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1)]))),128))])]),_:1})):w("",!0),l(x)?(u(),d("div",pe,[n(Q,{color:"#009c8c",type:"warning"},{default:s(()=>e[33]||(e[33]=[V(" No se encontraron registros. ")])),_:1})])):w("",!0),r("div",ve,[n(B,null,{default:s(()=>[n(Z,{justify:"center"},{default:s(()=>[n(_,{cols:"8"},{default:s(()=>[n(B,{class:"max-width"},{default:s(()=>[n(W,{modelValue:l(b),"onUpdate:modelValue":e[31]||(e[31]=t=>M(b)?b.value=t:null),length:l(G),onInput:N,class:"my-4"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})]),l(f)?(u(),A(B,{key:3},{default:s(()=>[n(J)]),_:1})):w("",!0)],64)}}},ye=X(ge,[["__scopeId","data-v-f669d230"]]),Ne={__name:"list",setup(Y){return(S,L)=>(u(),A(ye))}};export{Ne as default};
