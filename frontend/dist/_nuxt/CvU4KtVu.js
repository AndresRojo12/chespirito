import{_ as j,A as h,r,s as O,v as Q,g as W,m as u,o as f,c as I,a as o,b as s,w as d,d as R,C as Z,x as n,G as B,F as E,y as H,t as y,E as J,z as K,n as X}from"./0Y_4GbZS.js";import{m as ee}from"./BJ_t5Q7L.js";import{u as P}from"./B3iI-2-s.js";const te={class:"header-container"},ae={class:"text-left"},le={class:"text-left"},oe={class:"text-left"},ne={class:"text-left"},se={class:"text-left"},re={key:0,style:{"text-align":"center"}},ue={class:"text-center"},de={__name:"SalesGrid",setup(F){const $=K(),k=h(),c=r(1),p=r(10),A=r(10),V=r([]),x=r([]),C=r([]),S=r([]),l=r({categoryId:"",categoryName:"",productId:"",productName:"",quantitySold:"",salePrice:"",created_at:""}),N=r(!1),i=async()=>{N.value=!1;try{const{data:a,error:e}=await P(`${$.public.API_BASE_URL}sales?page=${c.value}
      &pageSize=${p.value}&categoryId=${l.value.categoryId}&categoryName=${l.value.categoryName}&productId=${l.value.productId}&productName=${l.value.productName}&quantitySold=${l.value.quantitySold}&salePrice=${l.value.salePrice}&createdAt=${l.value.created_at}`,{method:"GET"},"$CP5fcewpS2");if(e.value||!a.value){N.value=!0,V.value=[],S.value=[];return}V.value=a.value.data,A.value=a.value.totalPages,w()}catch(a){console.log(a),N.value=!0}},G=async()=>{try{const{data:a}=await P(`${$.public.API_BASE_URL}categories`,{method:"GET"},"$8jYQUjC1FG");x.value=a.value.data,w()}catch(a){console.log(a)}},q=async()=>{try{const{data:a}=await P(`${$.public.API_BASE_URL}products`,{method:"GET"},"$nlNlZs5NtW");C.value=a.value.data,w()}catch(a){console.log(a)}},w=()=>{V.value.length>0&&x.value.length>0&&C.value.length>0&&(S.value=V.value.map(a=>{const e=x.value.find(g=>g.id===a.categoryId),b=C.value.find(g=>g.id===a.productId);return{...a,categoryName:e?e.name:a.products.category.name,productName:b?b.name:a.products.name}}))};O(async()=>{await Q(),await i(),await G(),await q()});const m=a=>{c.value=a,i()};W([c,p,l],()=>{i()});const v=a=>{l.value[a]="",m(1),i()},T=()=>{k.push("/sales/register")};return(a,e)=>{const b=u("v-btn"),g=u("v-select"),_=u("v-text-field"),D=u("v-table"),Y=u("v-alert"),z=u("v-pagination"),U=u("v-container"),L=u("v-col"),M=u("v-row");return f(),I(E,null,[o("div",te,[s(b,{class:"register-button",onClick:Z(T,["prevent"])},{default:d(()=>e[17]||(e[17]=[R("Registrar ventas")])),_:1}),s(g,{class:"page-select",label:"Seleccionar número de items por página",modelValue:n(p),"onUpdate:modelValue":e[0]||(e[0]=t=>B(p)?p.value=t:null),items:[10,20,30,40,50,100],onChange:i},null,8,["modelValue"])]),o("div",null,[s(D,{style:{width:"100%"}},{default:d(()=>[o("thead",null,[o("tr",null,[o("th",ae,[s(_,{modelValue:n(l).categoryName,"onUpdate:modelValue":e[1]||(e[1]=t=>n(l).categoryName=t),label:"Categoría",clearable:"",onInput:e[2]||(e[2]=t=>m(1)),"onClick:clear":e[3]||(e[3]=t=>v("categoryName"))},null,8,["modelValue"])]),o("th",le,[s(_,{modelValue:n(l).productName,"onUpdate:modelValue":e[4]||(e[4]=t=>n(l).productName=t),label:"Producto",clearable:"",onInput:e[5]||(e[5]=t=>m(1)),"onClick:clear":e[6]||(e[6]=t=>v("productName"))},null,8,["modelValue"])]),o("th",oe,[s(_,{modelValue:n(l).quantitySold,"onUpdate:modelValue":e[7]||(e[7]=t=>n(l).quantitySold=t),label:"Cantidad",clearable:"",onInput:e[8]||(e[8]=t=>m(1)),"onClick:clear":e[9]||(e[9]=t=>v("quantitySold"))},null,8,["modelValue"])]),o("th",ne,[s(_,{modelValue:n(l).salePrice,"onUpdate:modelValue":e[10]||(e[10]=t=>n(l).salePrice=t),label:"Total",clearable:"",onInput:e[11]||(e[11]=t=>m(1)),"onClick:clear":e[12]||(e[12]=t=>v("salePrice"))},null,8,["modelValue"])]),o("th",se,[s(_,{modelValue:n(l).created_at,"onUpdate:modelValue":e[13]||(e[13]=t=>n(l).created_at=t),label:"Fecha",clearable:"",onInput:e[14]||(e[14]=t=>m(1)),"onClick:clear":e[15]||(e[15]=t=>v("created_at"))},null,8,["modelValue"])])])]),o("tbody",null,[(f(!0),I(E,null,H(n(S),t=>(f(),I("tr",{key:t.id},[o("td",null,y(t.categoryName),1),o("td",null,y(t.productName),1),o("td",null,y(t.quantitySold),1),o("td",null,y(t.salePrice),1),o("td",null,y(n(ee)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1)]))),128))])]),_:1}),n(N)?(f(),I("div",re,[s(Y,{color:"#009c8c",type:"warning"},{default:d(()=>e[18]||(e[18]=[R("No se encontraron registros.")])),_:1})])):J("",!0)]),o("div",ue,[s(U,null,{default:d(()=>[s(M,{justify:"center"},{default:d(()=>[s(L,{cols:"8"},{default:d(()=>[s(U,{class:"max-width"},{default:d(()=>[s(z,{modelValue:n(c),"onUpdate:modelValue":e[16]||(e[16]=t=>B(c)?c.value=t:null),length:n(A),onInput:i,class:"my-4"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})])],64)}}},ce=j(de,[["__scopeId","data-v-164d2c64"]]),ve={__name:"list",setup(F){return($,k)=>(f(),X(ce))}};export{ve as default};
