import{L as se}from"./DKrGet5X.js";import{_ as re,A as ie,r as v,E as ve,s as me,v as pe,g as ce,m as s,o as d,c as g,a as u,b as l,w as a,d as i,C as fe,x as b,n as V,F as C,y as B,t as y,G as z,D as S,z as _e}from"./Bi-YAAcS.js";import{m as P}from"./BJ_t5Q7L.js";import{I as ge}from"./DNgPGfy-.js";import{u as q}from"./G8Xyjgfx.js";import"./DOYwHpwi.js";const ye={class:"header-container"},Ve={class:"text-left"},ke={class:"text-left"},$e={class:"text-left"},xe={class:"text-left"},be={key:2,style:{"text-align":"center","margin-top":"20px"}},Ce={class:"text-center"},Ie={__name:"InventoryGrid",setup(H){const R=_e(),j=ie(),I=v(!1),{mdAndUp:J}=ve(),T=J,$=v([]),L=v([]),c=v([]),A=v(!1),O=v(null),N=v(1),F=v(10),W=v(1),n=v({salesId:"",productName:"",status:"",created_at:"",updated_at:""}),E=v(!1),k=async()=>{I.value=!0,E.value=!1;try{const{data:o,error:e}=await q(`${R.public.API_BASE_URL}inventories?page=${N.value}
      &pageSize=${F.value}&status=${n.value.status}&salesId=${n.value.salesId}&productName=${n.value.productName}&createdAt=${n.value.created_at}&updatedAt=${n.value.updated_at}`,{method:"GET"},"$Rsup4iOXk2");if(e.value||!o.value){E.value=!0,$.value=[],c.value=[];return}$.value=o.value.data,W.value=o.value.totalPages,X(),c.value.length===0&&(E.value=!0),I.value=!1}catch(o){console.log(o),E.value=!0}},K=async()=>{I.value=!0;try{const{data:o}=await q(`${R.public.API_BASE_URL}sales`,{method:"GET"},"$ZIEFPrrBWB");L.value=o.value.data,X(),I.value=!1}catch(o){console.log(o)}};me(async()=>{await pe(),await K(),await k()});const X=()=>{$.value.length>0&&L.value.length>0&&(c.value=$.value.map(o=>{const e=L.value.find(x=>x.id===o.salesId);return{...o,productName:e?e.products.name:o.sales.products.name}}))},m=o=>{N.value=o,k()};ce([N,F,n],()=>{k()});const f=o=>{n.value[o]="",m(1),k()},U=o=>{o&&o.id?(O.value={...o},A.value=!0):console.error("No se puede editar")},Q=async o=>{if(o){const e=$.value.findIndex(x=>x.id===o.id);e!==-1&&($.value[e]=o)}await k(),A.value=!1},h=()=>{j.push("/inventory/register")};return(o,e)=>{const x=s("v-btn"),ee=s("v-select"),_=s("v-text-field"),r=s("v-col"),Y=s("v-icon"),w=s("v-tooltip"),D=s("v-row"),Z=s("v-table"),te=s("v-alert"),le=s("v-pagination"),G=s("v-container"),ae=s("v-card-text"),oe=s("v-card-actions"),ne=s("v-card"),ue=s("v-dialog"),de=se;return d(),g(C,null,[u("div",ye,[l(x,{class:"register-button",onClick:fe(h,["prevent"])},{default:a(()=>e[28]||(e[28]=[i(" Registrar Inventario ")])),_:1}),l(ee,{class:"page-select",modelValue:F.value,"onUpdate:modelValue":e[0]||(e[0]=t=>F.value=t),items:[5,10,20,30,40,50,100],label:"Seleccionar datos por Página",onChange:k},null,8,["modelValue"])]),b(T)?S("",!0):(d(),V(Z,{key:0},{default:a(()=>[l(_,{modelValue:n.value.productName,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.productName=t),label:"Producto vendido",clearable:"",onInput:e[2]||(e[2]=t=>m(1)),"onClick:clear":e[3]||(e[3]=t=>f("productName"))},null,8,["modelValue"]),(d(!0),g(C,null,B(c.value,t=>(d(),V(r,{key:t.id},{default:a(()=>[l(D,null,{default:a(()=>[l(r,null,{default:a(()=>[i(y(t.productName),1)]),_:2},1024),l(r,{class:"d-flex justify-end"},{default:a(()=>[l(w,{text:"Editar"},{activator:a(({props:p})=>[l(Y,z({style:{color:"#009c8c"},ref_for:!0},p,{onClick:M=>U(t)}),{default:a(()=>e[29]||(e[29]=[i(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l(_,{modelValue:n.value.status,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.status=t),label:"Estado de producto",clearable:"",onInput:e[5]||(e[5]=t=>m(1)),"onClick:clear":e[6]||(e[6]=t=>f("status"))},null,8,["modelValue"]),(d(!0),g(C,null,B(c.value,t=>(d(),V(r,{key:t.id},{default:a(()=>[l(D,null,{default:a(()=>[l(r,null,{default:a(()=>[i(y(t.status),1)]),_:2},1024),l(r,{class:"d-flex justify-end"},{default:a(()=>[l(w,{text:"Editar"},{activator:a(({props:p})=>[l(Y,z({style:{color:"#009c8c"},ref_for:!0},p,{onClick:M=>U(t)}),{default:a(()=>e[30]||(e[30]=[i(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l(_,{modelValue:n.value.created_at,"onUpdate:modelValue":e[7]||(e[7]=t=>n.value.created_at=t),label:"Fecha de registro",clearable:"",onInput:e[8]||(e[8]=t=>m(1)),"onClick:clear":e[9]||(e[9]=t=>f("created_at"))},null,8,["modelValue"]),(d(!0),g(C,null,B(c.value,t=>(d(),V(r,{key:t.id},{default:a(()=>[l(D,null,{default:a(()=>[l(r,null,{default:a(()=>[i(y(b(P)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1)]),_:2},1024),l(r,{class:"d-flex justify-end"},{default:a(()=>[l(w,{text:"Editar"},{activator:a(({props:p})=>[l(Y,z({style:{color:"#009c8c"},ref_for:!0},p,{onClick:M=>U(t)}),{default:a(()=>e[31]||(e[31]=[i(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l(_,{modelValue:n.value.updated_at,"onUpdate:modelValue":e[10]||(e[10]=t=>n.value.updated_at=t),label:"Fecha actualización",clearable:"",onInput:e[11]||(e[11]=t=>m(1)),"onClick:clear":e[12]||(e[12]=t=>f("updated_at"))},null,8,["modelValue"]),(d(!0),g(C,null,B(c.value,t=>(d(),V(r,{key:t.id},{default:a(()=>[l(D,null,{default:a(()=>[l(r,null,{default:a(()=>[i(y(t.updatedAt?b(P)(t.updatedAt).tz("America/Bogota").format("DD/MM/YYYY hh:mm A"):"No actualizado"),1)]),_:2},1024),l(r,{class:"d-flex justify-end"},{default:a(()=>[l(w,{text:"Editar"},{activator:a(({props:p})=>[l(Y,z({style:{color:"#009c8c"},ref_for:!0},p,{onClick:M=>U(t)}),{default:a(()=>e[32]||(e[32]=[i(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})),b(T)?(d(),V(Z,{key:1},{default:a(()=>[u("thead",null,[u("tr",null,[u("th",Ve,[l(_,{modelValue:n.value.productName,"onUpdate:modelValue":e[13]||(e[13]=t=>n.value.productName=t),label:"Producto vendido",clearable:"",onInput:e[14]||(e[14]=t=>m(1)),"onClick:clear":e[15]||(e[15]=t=>f("productName"))},null,8,["modelValue"])]),u("th",ke,[l(_,{modelValue:n.value.status,"onUpdate:modelValue":e[16]||(e[16]=t=>n.value.status=t),label:"Estado de producto",clearable:"",onInput:e[17]||(e[17]=t=>m(1)),"onClick:clear":e[18]||(e[18]=t=>f("status"))},null,8,["modelValue"])]),u("th",$e,[l(_,{modelValue:n.value.created_at,"onUpdate:modelValue":e[19]||(e[19]=t=>n.value.created_at=t),label:"Fecha de registro",clearable:"",onInput:e[20]||(e[20]=t=>m(1)),"onClick:clear":e[21]||(e[21]=t=>f("created_at"))},null,8,["modelValue"])]),u("th",xe,[l(_,{modelValue:n.value.updated_at,"onUpdate:modelValue":e[22]||(e[22]=t=>n.value.updated_at=t),label:"Fecha actualización",clearable:"",onInput:e[23]||(e[23]=t=>m(1)),"onClick:clear":e[24]||(e[24]=t=>f("updated_at"))},null,8,["modelValue"])]),e[33]||(e[33]=u("th",{class:"text-left"},"Acciones",-1))])]),u("tbody",null,[(d(!0),g(C,null,B(c.value,t=>(d(),g("tr",{key:t.id},[u("td",null,y(t.productName),1),u("td",null,y(t.status),1),u("td",null,y(b(P)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1),u("td",null,y(t.updatedAt?b(P)(t.updatedAt).tz("America/Bogota").format("DD/MM/YYYY hh:mm A"):"No actualizado"),1),u("td",null,[l(w,{text:"Editar"},{activator:a(({props:p})=>[l(Y,z({style:{color:"#009c8c"},ref_for:!0},p,{onClick:M=>U(t)}),{default:a(()=>e[34]||(e[34]=[i(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)])]))),128))])]),_:1})):S("",!0),E.value?(d(),g("div",be,[l(te,{color:"#009c8c",type:"warning"},{default:a(()=>e[35]||(e[35]=[i("No se encontraron registros.")])),_:1})])):S("",!0),u("div",Ce,[l(G,null,{default:a(()=>[l(D,{justify:"center"},{default:a(()=>[l(r,{col:"8"},{default:a(()=>[l(G,{class:"max-width"},{default:a(()=>[l(le,{modelValue:N.value,"onUpdate:modelValue":e[25]||(e[25]=t=>N.value=t),length:W.value,onInput:k,class:"my-4"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})]),l(ue,{class:"dialog",modelValue:A.value,"onUpdate:modelValue":e[27]||(e[27]=t=>A.value=t)},{default:a(()=>[l(ne,null,{default:a(()=>[e[37]||(e[37]=u("h1",{class:"dialog-title"},"Editar estado",-1)),l(ae,null,{default:a(()=>[l(ge,{inventory:O.value,onSave:Q},null,8,["inventory"])]),_:1}),l(oe,null,{default:a(()=>[l(x,{class:"cancel-button",text:"",onClick:e[26]||(e[26]=t=>A.value=!1)},{default:a(()=>e[36]||(e[36]=[i(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),I.value?(d(),V(G,{key:3},{default:a(()=>[l(de)]),_:1})):S("",!0)],64)}}},Ae=re(Ie,[["__scopeId","data-v-3b2b1063"]]),Be={__name:"list",setup(H){return(R,j)=>(d(),V(Ae))}};export{Be as default};
