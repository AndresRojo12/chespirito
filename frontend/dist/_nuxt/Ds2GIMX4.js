import{_ as se,A as re,r as v,E as ie,s as ve,v as me,g as pe,m as s,o as u,c as y,a as d,b as l,w as a,d as i,C as ce,x as b,n as c,D,F as C,y as B,t as V,G as z,z as fe}from"./PexJTClo.js";import{m as R}from"./Dqxmxt4-.js";import{I as _e}from"./CcxKB6dm.js";import{L as q}from"./CIAY-Gyt.js";import{u as H}from"./Djd6y8D_.js";import"./C4iS2aBk.js";import"./DOYwHpwi.js";const ge={class:"header-container"},ye={class:"text-left"},Ve={class:"text-left"},ke={class:"text-left"},$e={class:"text-left"},xe={key:2,style:{"text-align":"center","margin-top":"20px"}},be={class:"text-center"},Ce={__name:"InventoryGrid",setup(J){const G=fe(),j=re(),F=v(!1),{mdAndUp:K}=ie(),T=K,$=v([]),L=v([]),f=v([]),I=v(!1),O=v(null),A=v(1),M=v(10),W=v(1),n=v({salesId:"",productName:"",status:"",created_at:"",updated_at:""}),N=v(!1),k=async()=>{F.value=!0,N.value=!1;try{const{data:o,error:e}=await H(`${G.public.API_BASE_URL}inventories?page=${A.value}
      &pageSize=${M.value}&status=${n.value.status}&salesId=${n.value.salesId}&productName=${n.value.productName}&createdAt=${n.value.created_at}&updatedAt=${n.value.updated_at}`,{method:"GET"},"$Rsup4iOXk2");if(e.value||!o.value){N.value=!0,$.value=[],f.value=[];return}$.value=o.value.data,W.value=o.value.totalPages,X(),f.value.length===0&&(N.value=!0)}catch(o){console.log(o),N.value=!0}finally{F.value=!1}},Q=async()=>{try{const{data:o}=await H(`${G.public.API_BASE_URL}sales`,{method:"GET"},"$ZIEFPrrBWB");L.value=o.value.data,X()}catch(o){console.log(o)}};ve(async()=>{await me(),await Q(),await k()});const X=()=>{$.value.length>0&&L.value.length>0&&(f.value=$.value.map(o=>{const e=L.value.find(x=>x.id===o.salesId);return{...o,productName:e?e.products.name:o.sales.products.name}}))},m=o=>{A.value=o,k()};pe([A,M,n],()=>{k()});const _=o=>{n.value[o]="",m(1),k()},E=o=>{o&&o.id?(O.value={...o},I.value=!0):console.error("No se puede editar")},h=async o=>{if(o){const e=$.value.findIndex(x=>x.id===o.id);e!==-1&&($.value[e]=o)}await k(),I.value=!1},ee=()=>{j.push("/inventory/register")};return(o,e)=>{const x=s("v-btn"),te=s("v-select"),P=s("v-container"),g=s("v-text-field"),r=s("v-col"),U=s("v-icon"),Y=s("v-tooltip"),w=s("v-row"),Z=s("v-table"),le=s("v-alert"),ae=s("v-pagination"),oe=s("v-card-text"),ne=s("v-card-actions"),ue=s("v-card"),de=s("v-dialog");return u(),y(C,null,[d("div",ge,[l(x,{class:"register-button",onClick:ce(ee,["prevent"])},{default:a(()=>e[28]||(e[28]=[i(" Registrar Inventario ")])),_:1}),l(te,{class:"page-select",modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=t=>M.value=t),items:[5,10,20,30,40,50,100],label:"Seleccionar datos por Página",onChange:k},null,8,["modelValue"])]),b(T)?D("",!0):(u(),c(Z,{key:0},{default:a(()=>[F.value?(u(),c(P,{key:0},{default:a(()=>[l(q)]),_:1})):D("",!0),l(g,{modelValue:n.value.productName,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.productName=t),label:"Producto vendido",clearable:"",onInput:e[2]||(e[2]=t=>m(1)),"onClick:clear":e[3]||(e[3]=t=>_("productName"))},null,8,["modelValue"]),(u(!0),y(C,null,B(f.value,t=>(u(),c(r,{key:t.id},{default:a(()=>[l(w,null,{default:a(()=>[l(r,null,{default:a(()=>[i(V(t.productName),1)]),_:2},1024),l(r,{class:"d-flex justify-end"},{default:a(()=>[l(Y,{text:"Editar"},{activator:a(({props:p})=>[l(U,z({style:{color:"#009c8c"},ref_for:!0},p,{onClick:S=>E(t)}),{default:a(()=>e[29]||(e[29]=[i(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l(g,{modelValue:n.value.status,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.status=t),label:"Estado de producto",clearable:"",onInput:e[5]||(e[5]=t=>m(1)),"onClick:clear":e[6]||(e[6]=t=>_("status"))},null,8,["modelValue"]),(u(!0),y(C,null,B(f.value,t=>(u(),c(r,{key:t.id},{default:a(()=>[l(w,null,{default:a(()=>[l(r,null,{default:a(()=>[i(V(t.status),1)]),_:2},1024),l(r,{class:"d-flex justify-end"},{default:a(()=>[l(Y,{text:"Editar"},{activator:a(({props:p})=>[l(U,z({style:{color:"#009c8c"},ref_for:!0},p,{onClick:S=>E(t)}),{default:a(()=>e[30]||(e[30]=[i(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l(g,{modelValue:n.value.created_at,"onUpdate:modelValue":e[7]||(e[7]=t=>n.value.created_at=t),label:"Fecha de registro",clearable:"",onInput:e[8]||(e[8]=t=>m(1)),"onClick:clear":e[9]||(e[9]=t=>_("created_at"))},null,8,["modelValue"]),(u(!0),y(C,null,B(f.value,t=>(u(),c(r,{key:t.id},{default:a(()=>[l(w,null,{default:a(()=>[l(r,null,{default:a(()=>[i(V(b(R)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1)]),_:2},1024),l(r,{class:"d-flex justify-end"},{default:a(()=>[l(Y,{text:"Editar"},{activator:a(({props:p})=>[l(U,z({style:{color:"#009c8c"},ref_for:!0},p,{onClick:S=>E(t)}),{default:a(()=>e[31]||(e[31]=[i(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),l(g,{modelValue:n.value.updated_at,"onUpdate:modelValue":e[10]||(e[10]=t=>n.value.updated_at=t),label:"Fecha actualización",clearable:"",onInput:e[11]||(e[11]=t=>m(1)),"onClick:clear":e[12]||(e[12]=t=>_("updated_at"))},null,8,["modelValue"]),(u(!0),y(C,null,B(f.value,t=>(u(),c(r,{key:t.id},{default:a(()=>[l(w,null,{default:a(()=>[l(r,null,{default:a(()=>[i(V(t.updatedAt?b(R)(t.updatedAt).tz("America/Bogota").format("DD/MM/YYYY hh:mm A"):"No actualizado"),1)]),_:2},1024),l(r,{class:"d-flex justify-end"},{default:a(()=>[l(Y,{text:"Editar"},{activator:a(({props:p})=>[l(U,z({style:{color:"#009c8c"},ref_for:!0},p,{onClick:S=>E(t)}),{default:a(()=>e[32]||(e[32]=[i(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})),b(T)?(u(),c(Z,{key:1},{default:a(()=>[d("thead",null,[d("tr",null,[d("th",ye,[l(g,{modelValue:n.value.productName,"onUpdate:modelValue":e[13]||(e[13]=t=>n.value.productName=t),label:"Producto vendido",clearable:"",onInput:e[14]||(e[14]=t=>m(1)),"onClick:clear":e[15]||(e[15]=t=>_("productName"))},null,8,["modelValue"])]),d("th",Ve,[l(g,{modelValue:n.value.status,"onUpdate:modelValue":e[16]||(e[16]=t=>n.value.status=t),label:"Estado de producto",clearable:"",onInput:e[17]||(e[17]=t=>m(1)),"onClick:clear":e[18]||(e[18]=t=>_("status"))},null,8,["modelValue"])]),d("th",ke,[l(g,{modelValue:n.value.created_at,"onUpdate:modelValue":e[19]||(e[19]=t=>n.value.created_at=t),label:"Fecha de registro",clearable:"",onInput:e[20]||(e[20]=t=>m(1)),"onClick:clear":e[21]||(e[21]=t=>_("created_at"))},null,8,["modelValue"])]),d("th",$e,[l(g,{modelValue:n.value.updated_at,"onUpdate:modelValue":e[22]||(e[22]=t=>n.value.updated_at=t),label:"Fecha actualización",clearable:"",onInput:e[23]||(e[23]=t=>m(1)),"onClick:clear":e[24]||(e[24]=t=>_("updated_at"))},null,8,["modelValue"])]),e[33]||(e[33]=d("th",{class:"text-left"},"Acciones",-1))])]),d("tbody",null,[F.value?(u(),c(P,{key:0},{default:a(()=>[l(q)]),_:1})):D("",!0),(u(!0),y(C,null,B(f.value,t=>(u(),y("tr",{key:t.id},[d("td",null,V(t.productName),1),d("td",null,V(t.status),1),d("td",null,V(b(R)(t.createdAt).tz("America/Bogota").format("DD/MM/YYYY/ hh:mm A")),1),d("td",null,V(t.updatedAt?b(R)(t.updatedAt).tz("America/Bogota").format("DD/MM/YYYY hh:mm A"):"No actualizado"),1),d("td",null,[l(Y,{text:"Editar"},{activator:a(({props:p})=>[l(U,z({style:{color:"#009c8c"},ref_for:!0},p,{onClick:S=>E(t)}),{default:a(()=>e[34]||(e[34]=[i(" mdi-pencil ")])),_:2},1040,["onClick"])]),_:2},1024)])]))),128))])]),_:1})):D("",!0),N.value?(u(),y("div",xe,[l(le,{color:"#009c8c",type:"warning"},{default:a(()=>e[35]||(e[35]=[i("No se encontraron registros.")])),_:1})])):D("",!0),d("div",be,[l(P,null,{default:a(()=>[l(w,{justify:"center"},{default:a(()=>[l(r,{col:"8"},{default:a(()=>[l(P,{class:"max-width"},{default:a(()=>[l(ae,{modelValue:A.value,"onUpdate:modelValue":e[25]||(e[25]=t=>A.value=t),length:W.value,onInput:k,class:"my-4"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:1})]),l(de,{class:"dialog",modelValue:I.value,"onUpdate:modelValue":e[27]||(e[27]=t=>I.value=t)},{default:a(()=>[l(ue,null,{default:a(()=>[e[37]||(e[37]=d("h1",{class:"dialog-title"},"Editar estado",-1)),l(oe,null,{default:a(()=>[l(_e,{inventory:O.value,onSave:h},null,8,["inventory"])]),_:1}),l(ne,null,{default:a(()=>[l(x,{class:"cancel-button",text:"",onClick:e[26]||(e[26]=t=>I.value=!1)},{default:a(()=>e[36]||(e[36]=[i(" Cancelar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Ie=se(Ce,[["__scopeId","data-v-94f2cea2"]]),Be={__name:"list",setup(J){return(G,j)=>(u(),c(Ie))}};export{Be as default};
